{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/lib/store/cart-store.ts"],"sourcesContent":["import { createStore } from \"zustand/vanilla\";\nimport { persist } from \"zustand/middleware\";\n\n// Types\nexport interface CartItem {\n  productId: string;\n  name: string;\n  price: number;\n  quantity: number;\n  image?: string;\n}\n\nexport interface CartState {\n  items: CartItem[];\n  isOpen: boolean;\n}\n\nexport interface CartActions {\n  addItem: (item: Omit<CartItem, \"quantity\">, quantity?: number) => void;\n  removeItem: (productId: string) => void;\n  updateQuantity: (productId: string, quantity: number) => void;\n  clearCart: () => void;\n  toggleCart: () => void;\n  openCart: () => void;\n  closeCart: () => void;\n}\n\nexport type CartStore = CartState & CartActions;\n\n// Default state\nexport const defaultInitState: CartState = {\n  items: [],\n  isOpen: false,\n};\n\n/**\n * Cart store factory - creates new store instance per provider\n * Uses persist middleware with skipHydration for Next.js SSR compatibility\n * @see https://zustand.docs.pmnd.rs/guides/nextjs#hydration-and-asynchronous-storages\n */\nexport const createCartStore = (initState: CartState = defaultInitState) => {\n  return createStore<CartStore>()(\n    persist(\n      (set) => ({\n        ...initState,\n\n        addItem: (item, quantity = 1) =>\n          set((state) => {\n            const existing = state.items.find(\n              (i) => i.productId === item.productId\n            );\n            if (existing) {\n              return {\n                items: state.items.map((i) =>\n                  i.productId === item.productId\n                    ? { ...i, quantity: i.quantity + quantity }\n                    : i\n                ),\n              };\n            }\n            return { items: [...state.items, { ...item, quantity }] };\n          }),\n\n        removeItem: (productId) =>\n          set((state) => ({\n            items: state.items.filter((i) => i.productId !== productId),\n          })),\n\n        updateQuantity: (productId, quantity) =>\n          set((state) => {\n            if (quantity <= 0) {\n              return {\n                items: state.items.filter((i) => i.productId !== productId),\n              };\n            }\n            return {\n              items: state.items.map((i) =>\n                i.productId === productId ? { ...i, quantity } : i\n              ),\n            };\n          }),\n\n        clearCart: () => set({ items: [] }),\n        toggleCart: () => set((state) => ({ isOpen: !state.isOpen })),\n        openCart: () => set({ isOpen: true }),\n        closeCart: () => set({ isOpen: false }),\n      }),\n      {\n        name: \"cart-storage\",\n        // Skip automatic hydration - we'll trigger it manually on the client\n        skipHydration: true,\n        // Only persist items, not UI state like isOpen\n        partialize: (state) => ({ items: state.items }),\n      }\n    )\n  );\n};\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AA6BO,MAAM,mBAA8B;IACzC,OAAO,EAAE;IACT,QAAQ;AACV;AAOO,MAAM,kBAAkB,CAAC,YAAuB,gBAAgB;IACrE,OAAO,IAAA,mWAAW,IAChB,IAAA,kWAAO,EACL,CAAC,MAAQ,CAAC;YACR,GAAG,SAAS;YAEZ,SAAS,CAAC,MAAM,WAAW,CAAC,GAC1B,IAAI,CAAC;oBACH,MAAM,WAAW,MAAM,KAAK,CAAC,IAAI,CAC/B,CAAC,IAAM,EAAE,SAAS,KAAK,KAAK,SAAS;oBAEvC,IAAI,UAAU;wBACZ,OAAO;4BACL,OAAO,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC,IACtB,EAAE,SAAS,KAAK,KAAK,SAAS,GAC1B;oCAAE,GAAG,CAAC;oCAAE,UAAU,EAAE,QAAQ,GAAG;gCAAS,IACxC;wBAER;oBACF;oBACA,OAAO;wBAAE,OAAO;+BAAI,MAAM,KAAK;4BAAE;gCAAE,GAAG,IAAI;gCAAE;4BAAS;yBAAE;oBAAC;gBAC1D;YAEF,YAAY,CAAC,YACX,IAAI,CAAC,QAAU,CAAC;wBACd,OAAO,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,KAAK;oBACnD,CAAC;YAEH,gBAAgB,CAAC,WAAW,WAC1B,IAAI,CAAC;oBACH,IAAI,YAAY,GAAG;wBACjB,OAAO;4BACL,OAAO,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,IAAM,EAAE,SAAS,KAAK;wBACnD;oBACF;oBACA,OAAO;wBACL,OAAO,MAAM,KAAK,CAAC,GAAG,CAAC,CAAC,IACtB,EAAE,SAAS,KAAK,YAAY;gCAAE,GAAG,CAAC;gCAAE;4BAAS,IAAI;oBAErD;gBACF;YAEF,WAAW,IAAM,IAAI;oBAAE,OAAO,EAAE;gBAAC;YACjC,YAAY,IAAM,IAAI,CAAC,QAAU,CAAC;wBAAE,QAAQ,CAAC,MAAM,MAAM;oBAAC,CAAC;YAC3D,UAAU,IAAM,IAAI;oBAAE,QAAQ;gBAAK;YACnC,WAAW,IAAM,IAAI;oBAAE,QAAQ;gBAAM;QACvC,CAAC,GACD;QACE,MAAM;QACN,qEAAqE;QACrE,eAAe;QACf,+CAA+C;QAC/C,YAAY,CAAC,QAAU,CAAC;gBAAE,OAAO,MAAM,KAAK;YAAC,CAAC;IAChD;AAGN"}},
    {"offset": {"line": 89, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/lib/store/cart-store-provider.tsx"],"sourcesContent":["\"use client\";\n\nimport {\n  createContext,\n  useContext,\n  useRef,\n  useEffect,\n  type ReactNode,\n} from \"react\";\nimport { useStore } from \"zustand\";\nimport {\n  createCartStore,\n  type CartStore,\n  type CartState,\n  defaultInitState,\n} from \"./cart-store\";\n\n// Store API type\nexport type CartStoreApi = ReturnType<typeof createCartStore>;\n\n// Context\nconst CartStoreContext = createContext<CartStoreApi | undefined>(undefined);\n\n// Provider props\ninterface CartStoreProviderProps {\n  children: ReactNode;\n  initialState?: CartState;\n}\n\n/**\n * Cart store provider - creates one store instance per provider\n * Manually triggers rehydration from localStorage on the client\n * Wrap your app/(app) layout with this provider\n * @see https://zustand.docs.pmnd.rs/guides/nextjs#hydration-and-asynchronous-storages\n */\nexport const CartStoreProvider = ({\n  children,\n  initialState,\n}: CartStoreProviderProps) => {\n  const storeRef = useRef<CartStoreApi | null>(null);\n\n  if (storeRef.current === null) {\n    storeRef.current = createCartStore(initialState ?? defaultInitState);\n  }\n\n  // Manually trigger rehydration on the client after mount\n  // This prevents SSR hydration mismatches since localStorage isn't available on server\n  useEffect(() => {\n    storeRef.current?.persist.rehydrate();\n  }, []);\n\n  return (\n    <CartStoreContext.Provider value={storeRef.current}>\n      {children}\n    </CartStoreContext.Provider>\n  );\n};\n\n/**\n * Hook to access the cart store with a selector\n * Must be used within CartStoreProvider\n * Handles SSR by returning default state until hydrated\n */\nexport const useCartStore = <T,>(selector: (store: CartStore) => T): T => {\n  const cartStoreContext = useContext(CartStoreContext);\n\n  if (!cartStoreContext) {\n    throw new Error(\"useCartStore must be used within CartStoreProvider\");\n  }\n\n  return useStore(cartStoreContext, selector);\n};\n\n// ============================================\n// Convenience Hooks\n// ============================================\n\n/**\n * Get all cart items\n */\nexport const useCartItems = () => useCartStore((state) => state.items);\n\n/**\n * Get cart open state\n */\nexport const useCartIsOpen = () => useCartStore((state) => state.isOpen);\n\n/**\n * Get total number of items in cart\n */\nexport const useTotalItems = () =>\n  useCartStore((state) =>\n    state.items.reduce((sum, item) => sum + item.quantity, 0),\n  );\n\n/**\n * Get total price of cart\n */\nexport const useTotalPrice = () =>\n  useCartStore((state) =>\n    state.items.reduce((sum, item) => sum + item.price * item.quantity, 0),\n  );\n\n/**\n * Find a specific item in cart\n */\nexport const useCartItem = (productId: string) =>\n  useCartStore((state) =>\n    state.items.find((item) => item.productId === productId),\n  );\n\n/**\n * Get all cart actions\n * Actions are stable references from zustand, safe to destructure\n */\nexport const useCartActions = () => {\n  const addItem = useCartStore((state) => state.addItem);\n  const removeItem = useCartStore((state) => state.removeItem);\n  const updateQuantity = useCartStore((state) => state.updateQuantity);\n  const clearCart = useCartStore((state) => state.clearCart);\n  const toggleCart = useCartStore((state) => state.toggleCart);\n  const openCart = useCartStore((state) => state.openCart);\n  const closeCart = useCartStore((state) => state.closeCart);\n\n  return {\n    addItem,\n    removeItem,\n    updateQuantity,\n    clearCart,\n    toggleCart,\n    openCart,\n    closeCart,\n  };\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAEA;AAOA;AACA;AAVA;;;;;AAoBA,UAAU;AACV,MAAM,iCAAmB,IAAA,kaAAa,EAA2B;AAc1D,MAAM,oBAAoB,CAAC,EAChC,QAAQ,EACR,YAAY,EACW;IACvB,MAAM,WAAW,IAAA,2ZAAM,EAAsB;IAE7C,IAAI,SAAS,OAAO,KAAK,MAAM;QAC7B,SAAS,OAAO,GAAG,IAAA,gJAAe,EAAC,gBAAgB,iJAAgB;IACrE;IAEA,yDAAyD;IACzD,sFAAsF;IACtF,IAAA,8ZAAS,EAAC;QACR,SAAS,OAAO,EAAE,QAAQ;IAC5B,GAAG,EAAE;IAEL,qBACE,0bAAC,iBAAiB,QAAQ;QAAC,OAAO,SAAS,OAAO;kBAC/C;;;;;;AAGP;AAOO,MAAM,eAAe,CAAK;IAC/B,MAAM,mBAAmB,IAAA,+ZAAU,EAAC;IAEpC,IAAI,CAAC,kBAAkB;QACrB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,IAAA,8VAAQ,EAAC,kBAAkB;AACpC;AASO,MAAM,eAAe,IAAM,aAAa,CAAC,QAAU,MAAM,KAAK;AAK9D,MAAM,gBAAgB,IAAM,aAAa,CAAC,QAAU,MAAM,MAAM;AAKhE,MAAM,gBAAgB,IAC3B,aAAa,CAAC,QACZ,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,QAAQ,EAAE;AAMpD,MAAM,gBAAgB,IAC3B,aAAa,CAAC,QACZ,MAAM,KAAK,CAAC,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,KAAK,GAAG,KAAK,QAAQ,EAAE;AAMjE,MAAM,cAAc,CAAC,YAC1B,aAAa,CAAC,QACZ,MAAM,KAAK,CAAC,IAAI,CAAC,CAAC,OAAS,KAAK,SAAS,KAAK;AAO3C,MAAM,iBAAiB;IAC5B,MAAM,UAAU,aAAa,CAAC,QAAU,MAAM,OAAO;IACrD,MAAM,aAAa,aAAa,CAAC,QAAU,MAAM,UAAU;IAC3D,MAAM,iBAAiB,aAAa,CAAC,QAAU,MAAM,cAAc;IACnE,MAAM,YAAY,aAAa,CAAC,QAAU,MAAM,SAAS;IACzD,MAAM,aAAa,aAAa,CAAC,QAAU,MAAM,UAAU;IAC3D,MAAM,WAAW,aAAa,CAAC,QAAU,MAAM,QAAQ;IACvD,MAAM,YAAY,aAAa,CAAC,QAAU,MAAM,SAAS;IAEzD,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;IACF;AACF"}},
    {"offset": {"line": 171, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/lib/store/chat-store.ts"],"sourcesContent":["import { createStore } from \"zustand/vanilla\";\n\n// Types\nexport interface ChatState {\n  isOpen: boolean;\n  pendingMessage: string | null;\n}\n\nexport interface ChatActions {\n  openChat: () => void;\n  openChatWithMessage: (message: string) => void;\n  closeChat: () => void;\n  toggleChat: () => void;\n  clearPendingMessage: () => void;\n}\n\nexport type ChatStore = ChatState & ChatActions;\n\n// Default state\nexport const defaultInitState: ChatState = {\n  isOpen: false,\n  pendingMessage: null,\n};\n\n/**\n * Chat store factory - creates new store instance per provider\n * Simple store for managing chat sheet visibility\n * No persistence needed - chat should start closed on page load\n */\nexport const createChatStore = (initState: ChatState = defaultInitState) => {\n  return createStore<ChatStore>()((set) => ({\n    ...initState,\n\n    openChat: () => set({ isOpen: true }),\n    openChatWithMessage: (message: string) =>\n      set({ isOpen: true, pendingMessage: message }),\n    closeChat: () => set({ isOpen: false }),\n    toggleChat: () => set((state) => ({ isOpen: !state.isOpen })),\n    clearPendingMessage: () => set({ pendingMessage: null }),\n  }));\n};\n"],"names":[],"mappings":";;;;;;AAAA;;AAmBO,MAAM,mBAA8B;IACzC,QAAQ;IACR,gBAAgB;AAClB;AAOO,MAAM,kBAAkB,CAAC,YAAuB,gBAAgB;IACrE,OAAO,IAAA,mWAAW,IAAc,CAAC,MAAQ,CAAC;YACxC,GAAG,SAAS;YAEZ,UAAU,IAAM,IAAI;oBAAE,QAAQ;gBAAK;YACnC,qBAAqB,CAAC,UACpB,IAAI;oBAAE,QAAQ;oBAAM,gBAAgB;gBAAQ;YAC9C,WAAW,IAAM,IAAI;oBAAE,QAAQ;gBAAM;YACrC,YAAY,IAAM,IAAI,CAAC,QAAU,CAAC;wBAAE,QAAQ,CAAC,MAAM,MAAM;oBAAC,CAAC;YAC3D,qBAAqB,IAAM,IAAI;oBAAE,gBAAgB;gBAAK;QACxD,CAAC;AACH"}},
    {"offset": {"line": 208, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/lib/store/chat-store-provider.tsx"],"sourcesContent":["\"use client\";\n\nimport { createContext, useContext, useRef, type ReactNode } from \"react\";\nimport { useStore } from \"zustand\";\nimport {\n  createChatStore,\n  type ChatStore,\n  type ChatState,\n  defaultInitState,\n} from \"./chat-store\";\n\n// Store API type\nexport type ChatStoreApi = ReturnType<typeof createChatStore>;\n\n// Context\nconst ChatStoreContext = createContext<ChatStoreApi | undefined>(undefined);\n\n// Provider props\ninterface ChatStoreProviderProps {\n  children: ReactNode;\n  initialState?: ChatState;\n}\n\n/**\n * Chat store provider - creates one store instance per provider\n * Wrap your app/(app) layout with this provider\n */\nexport const ChatStoreProvider = ({\n  children,\n  initialState,\n}: ChatStoreProviderProps) => {\n  const storeRef = useRef<ChatStoreApi | null>(null);\n\n  if (storeRef.current === null) {\n    storeRef.current = createChatStore(initialState ?? defaultInitState);\n  }\n\n  return (\n    <ChatStoreContext.Provider value={storeRef.current}>\n      {children}\n    </ChatStoreContext.Provider>\n  );\n};\n\n/**\n * Hook to access the chat store with a selector\n * Must be used within ChatStoreProvider\n */\nexport const useChatStore = <T,>(selector: (store: ChatStore) => T): T => {\n  const chatStoreContext = useContext(ChatStoreContext);\n\n  if (!chatStoreContext) {\n    throw new Error(\"useChatStore must be used within ChatStoreProvider\");\n  }\n\n  return useStore(chatStoreContext, selector);\n};\n\n// ============================================\n// Convenience Hooks\n// ============================================\n\n/**\n * Get chat open state\n */\nexport const useIsChatOpen = () => useChatStore((state) => state.isOpen);\n\n/**\n * Get pending message\n */\nexport const usePendingMessage = () =>\n  useChatStore((state) => state.pendingMessage);\n\n/**\n * Get all chat actions\n * Actions are stable references from zustand, safe to destructure\n */\nexport const useChatActions = () => {\n  const openChat = useChatStore((state) => state.openChat);\n  const openChatWithMessage = useChatStore(\n    (state) => state.openChatWithMessage,\n  );\n  const closeChat = useChatStore((state) => state.closeChat);\n  const toggleChat = useChatStore((state) => state.toggleChat);\n  const clearPendingMessage = useChatStore(\n    (state) => state.clearPendingMessage,\n  );\n\n  return {\n    openChat,\n    openChatWithMessage,\n    closeChat,\n    toggleChat,\n    clearPendingMessage,\n  };\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;AAEA;AACA;AACA;AAJA;;;;;AAcA,UAAU;AACV,MAAM,iCAAmB,IAAA,kaAAa,EAA2B;AAY1D,MAAM,oBAAoB,CAAC,EAChC,QAAQ,EACR,YAAY,EACW;IACvB,MAAM,WAAW,IAAA,2ZAAM,EAAsB;IAE7C,IAAI,SAAS,OAAO,KAAK,MAAM;QAC7B,SAAS,OAAO,GAAG,IAAA,gJAAe,EAAC,gBAAgB,iJAAgB;IACrE;IAEA,qBACE,0bAAC,iBAAiB,QAAQ;QAAC,OAAO,SAAS,OAAO;kBAC/C;;;;;;AAGP;AAMO,MAAM,eAAe,CAAK;IAC/B,MAAM,mBAAmB,IAAA,+ZAAU,EAAC;IAEpC,IAAI,CAAC,kBAAkB;QACrB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO,IAAA,8VAAQ,EAAC,kBAAkB;AACpC;AASO,MAAM,gBAAgB,IAAM,aAAa,CAAC,QAAU,MAAM,MAAM;AAKhE,MAAM,oBAAoB,IAC/B,aAAa,CAAC,QAAU,MAAM,cAAc;AAMvC,MAAM,iBAAiB;IAC5B,MAAM,WAAW,aAAa,CAAC,QAAU,MAAM,QAAQ;IACvD,MAAM,sBAAsB,aAC1B,CAAC,QAAU,MAAM,mBAAmB;IAEtC,MAAM,YAAY,aAAa,CAAC,QAAU,MAAM,SAAS;IACzD,MAAM,aAAa,aAAa,CAAC,QAAU,MAAM,UAAU;IAC3D,MAAM,sBAAsB,aAC1B,CAAC,QAAU,MAAM,mBAAmB;IAGtC,OAAO;QACL;QACA;QACA;QACA;QACA;IACF;AACF"}},
    {"offset": {"line": 386, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/components/ui/sonner.tsx"],"sourcesContent":["\"use client\"\n\nimport {\n  CircleCheckIcon,\n  InfoIcon,\n  Loader2Icon,\n  OctagonXIcon,\n  TriangleAlertIcon,\n} from \"lucide-react\"\nimport { useTheme } from \"next-themes\"\nimport { Toaster as Sonner, type ToasterProps } from \"sonner\"\n\nconst Toaster = ({ ...props }: ToasterProps) => {\n  const { theme = \"system\" } = useTheme()\n\n  return (\n    <Sonner\n      theme={theme as ToasterProps[\"theme\"]}\n      className=\"toaster group\"\n      icons={{\n        success: <CircleCheckIcon className=\"size-4\" />,\n        info: <InfoIcon className=\"size-4\" />,\n        warning: <TriangleAlertIcon className=\"size-4\" />,\n        error: <OctagonXIcon className=\"size-4\" />,\n        loading: <Loader2Icon className=\"size-4 animate-spin\" />,\n      }}\n      style={\n        {\n          \"--normal-bg\": \"var(--popover)\",\n          \"--normal-text\": \"var(--popover-foreground)\",\n          \"--normal-border\": \"var(--border)\",\n          \"--border-radius\": \"var(--radius)\",\n        } as React.CSSProperties\n      }\n      {...props}\n    />\n  )\n}\n\nexport { Toaster }\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AAVA;;;;;AAYA,MAAM,UAAU,CAAC,EAAE,GAAG,OAAqB;IACzC,MAAM,EAAE,QAAQ,QAAQ,EAAE,GAAG,IAAA,oSAAQ;IAErC,qBACE,0bAAC,mRAAM;QACL,OAAO;QACP,WAAU;QACV,OAAO;YACL,uBAAS,0bAAC,+TAAe;gBAAC,WAAU;;;;;;YACpC,oBAAM,0bAAC,sSAAQ;gBAAC,WAAU;;;;;;YAC1B,uBAAS,0bAAC,qUAAiB;gBAAC,WAAU;;;;;;YACtC,qBAAO,0bAAC,sTAAY;gBAAC,WAAU;;;;;;YAC/B,uBAAS,0bAAC,wTAAW;gBAAC,WAAU;;;;;;QAClC;QACA,OACE;YACE,eAAe;YACf,iBAAiB;YACjB,mBAAmB;YACnB,mBAAmB;QACrB;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 469, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n\n/**\n * Format a price amount with currency symbol\n * @param amount - The price amount (can be null/undefined)\n * @param currency - Currency symbol (default: \"£\")\n * @returns Formatted price string (e.g., \"£599.99\")\n */\nexport function formatPrice(\n  amount: number | null | undefined,\n  currency = \"£\"\n): string {\n  return `${currency}${(amount ?? 0).toFixed(2)}`;\n}\n\ntype DateFormatOption = \"short\" | \"long\" | \"datetime\";\n\nconst DATE_FORMAT_OPTIONS: Record<\n  DateFormatOption,\n  Intl.DateTimeFormatOptions\n> = {\n  short: { day: \"numeric\", month: \"short\" },\n  long: { day: \"numeric\", month: \"long\", year: \"numeric\" },\n  datetime: {\n    day: \"numeric\",\n    month: \"long\",\n    year: \"numeric\",\n    hour: \"2-digit\",\n    minute: \"2-digit\",\n  },\n};\n\n/**\n * Format a date string with locale-specific formatting\n * @param date - ISO date string (can be null/undefined)\n * @param format - Format option: \"short\" (5 Jan), \"long\" (5 January 2025), \"datetime\" (5 January 2025, 14:30)\n * @param fallback - Fallback text when date is null/undefined\n * @returns Formatted date string\n */\nexport function formatDate(\n  date: string | null | undefined,\n  format: DateFormatOption = \"long\",\n  fallback = \"Date unknown\"\n): string {\n  if (!date) return fallback;\n  return new Date(date).toLocaleDateString(\n    \"en-GB\",\n    DATE_FORMAT_OPTIONS[format]\n  );\n}\n\n/**\n * Format an order number for display (shows only the last segment after the last hyphen)\n * @param orderNumber - Full order number (e.g., \"ORD-2024-ABC123\")\n * @returns Shortened order number (e.g., \"ABC123\") or \"N/A\" if null\n */\nexport function formatOrderNumber(\n  orderNumber: string | null | undefined\n): string {\n  if (!orderNumber) return \"N/A\";\n  return orderNumber.split(\"-\").pop() ?? orderNumber;\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,oOAAO,EAAC,IAAA,8LAAI,EAAC;AACtB;AAQO,SAAS,YACd,MAAiC,EACjC,WAAW,GAAG;IAEd,OAAO,GAAG,WAAW,CAAC,UAAU,CAAC,EAAE,OAAO,CAAC,IAAI;AACjD;AAIA,MAAM,sBAGF;IACF,OAAO;QAAE,KAAK;QAAW,OAAO;IAAQ;IACxC,MAAM;QAAE,KAAK;QAAW,OAAO;QAAQ,MAAM;IAAU;IACvD,UAAU;QACR,KAAK;QACL,OAAO;QACP,MAAM;QACN,MAAM;QACN,QAAQ;IACV;AACF;AASO,SAAS,WACd,IAA+B,EAC/B,SAA2B,MAAM,EACjC,WAAW,cAAc;IAEzB,IAAI,CAAC,MAAM,OAAO;IAClB,OAAO,IAAI,KAAK,MAAM,kBAAkB,CACtC,SACA,mBAAmB,CAAC,OAAO;AAE/B;AAOO,SAAS,kBACd,WAAsC;IAEtC,IAAI,CAAC,aAAa,OAAO;IACzB,OAAO,YAAY,KAAK,CAAC,KAAK,GAAG,MAAM;AACzC"}},
    {"offset": {"line": 519, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n        \"icon-sm\": \"size-8\",\n        \"icon-lg\": \"size-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,kPAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,4SAAI,GAAG;IAE9B,qBACE,0bAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 578, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/components/app/Header.tsx"],"sourcesContent":["\"use client\";\n\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport { Package, ShoppingBag, Sparkles, User } from \"lucide-react\";\nimport { SignedIn, SignedOut, SignInButton, UserButton } from \"@clerk/nextjs\";\nimport { Button } from \"@/components/ui/button\";\nimport { useCartActions, useTotalItems } from \"@/lib/store/cart-store-provider\";\nimport { useChatActions, useIsChatOpen } from \"@/lib/store/chat-store-provider\";\n\nexport function Header() {\n  const { openCart } = useCartActions();\n  const { openChat } = useChatActions();\n  const isChatOpen = useIsChatOpen();\n  const totalItems = useTotalItems();\n\n  return (\n    <header className=\"sticky top-0 z-50 border-b border-zinc-200 bg-white/80 backdrop-blur-md dark:border-zinc-800 dark:bg-zinc-950/80\">\n      <div className=\"mx-auto flex h-24 max-w-7xl items-center justify-between px-4 sm:px-6 lg:px-8\">\n        {/* Logo */}\n        <Link href=\"/\" className=\"flex items-center gap-2\">\n          <Image\n            src=\"/logo.svg\"\n            alt=\"Elimu Robotics logo\"\n            width={68}\n            height={68}\n            className=\"h-26 w-26\"\n          />\n        </Link>\n\n        {/* Actions */}\n        <div className=\"flex items-center gap-2\">\n          {/* My Orders - Only when signed in */}\n          <SignedIn>\n            <Button asChild>\n              <Link href=\"/orders\" className=\"flex items-center gap-2\">\n                <Package className=\"h-5 w-5\" />\n                <span className=\"text-sm font-medium\">My Orders</span>\n              </Link>\n            </Button>\n          </SignedIn>\n\n          {/* AI Shopping Assistant */}\n          {!isChatOpen && (\n            <Button\n              onClick={openChat}\n              className=\"gap-2 bg-gradient-to-r from-amber-500 to-orange-500 text-white shadow-md shadow-amber-200/50 transition-all hover:from-amber-600 hover:to-orange-600 hover:shadow-lg hover:shadow-amber-300/50 dark:shadow-amber-900/30 dark:hover:shadow-amber-800/40\"\n            >\n              <Sparkles className=\"h-4 w-4\" />\n              <span className=\"text-sm font-medium\">Ask AI</span>\n            </Button>\n          )}\n\n          {/* Cart Button */}\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"relative\"\n            onClick={openCart}\n          >\n            <ShoppingBag className=\"h-5 w-5\" />\n            {totalItems > 0 && (\n              <span className=\"absolute -right-1 -top-1 flex h-5 w-5 items-center justify-center rounded-full bg-zinc-900 text-xs font-medium text-white dark:bg-zinc-100 dark:text-zinc-900\">\n                {totalItems > 99 ? \"99+\" : totalItems}\n              </span>\n            )}\n            <span className=\"sr-only\">Open cart ({totalItems} items)</span>\n          </Button>\n\n          {/* User */}\n          <SignedIn>\n            <UserButton\n              afterSwitchSessionUrl=\"/\"\n              appearance={{\n                elements: {\n                  avatarBox: \"h-9 w-9\",\n                },\n              }}\n            >\n              <UserButton.MenuItems>\n                <UserButton.Link\n                  label=\"My Orders\"\n                  labelIcon={<Package className=\"h-4 w-4\" />}\n                  href=\"/orders\"\n                />\n              </UserButton.MenuItems>\n            </UserButton>\n          </SignedIn>\n          <SignedOut>\n            <SignInButton mode=\"modal\">\n              <Button variant=\"ghost\" size=\"icon\">\n                <User className=\"h-5 w-5\" />\n                <span className=\"sr-only\">Sign in</span>\n              </Button>\n            </SignInButton>\n          </SignedOut>\n        </div>\n      </div>\n    </header>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AARA;;;;;;;;;AAUO,SAAS;IACd,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAA,4JAAc;IACnC,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAA,4JAAc;IACnC,MAAM,aAAa,IAAA,2JAAa;IAChC,MAAM,aAAa,IAAA,2JAAa;IAEhC,qBACE,0bAAC;QAAO,WAAU;kBAChB,cAAA,0bAAC;YAAI,WAAU;;8BAEb,0bAAC,mXAAI;oBAAC,MAAK;oBAAI,WAAU;8BACvB,cAAA,0bAAC,oVAAK;wBACJ,KAAI;wBACJ,KAAI;wBACJ,OAAO;wBACP,QAAQ;wBACR,WAAU;;;;;;;;;;;8BAKd,0bAAC;oBAAI,WAAU;;sCAEb,0bAAC,kYAAQ;sCACP,cAAA,0bAAC,qIAAM;gCAAC,OAAO;0CACb,cAAA,0bAAC,mXAAI;oCAAC,MAAK;oCAAU,WAAU;;sDAC7B,0bAAC,uSAAO;4CAAC,WAAU;;;;;;sDACnB,0bAAC;4CAAK,WAAU;sDAAsB;;;;;;;;;;;;;;;;;;;;;;wBAM3C,CAAC,4BACA,0bAAC,qIAAM;4BACL,SAAS;4BACT,WAAU;;8CAEV,0bAAC,0SAAQ;oCAAC,WAAU;;;;;;8CACpB,0bAAC;oCAAK,WAAU;8CAAsB;;;;;;;;;;;;sCAK1C,0bAAC,qIAAM;4BACL,SAAQ;4BACR,MAAK;4BACL,WAAU;4BACV,SAAS;;8CAET,0bAAC,uTAAW;oCAAC,WAAU;;;;;;gCACtB,aAAa,mBACZ,0bAAC;oCAAK,WAAU;8CACb,aAAa,KAAK,QAAQ;;;;;;8CAG/B,0bAAC;oCAAK,WAAU;;wCAAU;wCAAY;wCAAW;;;;;;;;;;;;;sCAInD,0bAAC,kYAAQ;sCACP,cAAA,0bAAC,yUAAU;gCACT,uBAAsB;gCACtB,YAAY;oCACV,UAAU;wCACR,WAAW;oCACb;gCACF;0CAEA,cAAA,0bAAC,yUAAU,CAAC,SAAS;8CACnB,cAAA,0bAAC,yUAAU,CAAC,IAAI;wCACd,OAAM;wCACN,yBAAW,0bAAC,uSAAO;4CAAC,WAAU;;;;;;wCAC9B,MAAK;;;;;;;;;;;;;;;;;;;;;sCAKb,0bAAC,mYAAS;sCACR,cAAA,0bAAC,+UAAY;gCAAC,MAAK;0CACjB,cAAA,0bAAC,qIAAM;oCAAC,SAAQ;oCAAQ,MAAK;;sDAC3B,0bAAC,8RAAI;4CAAC,WAAU;;;;;;sDAChB,0bAAC;4CAAK,WAAU;sDAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQ1C"}},
    {"offset": {"line": 837, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/components/ui/sheet.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { XIcon } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Sheet({ ...props }: React.ComponentProps<typeof SheetPrimitive.Root>) {\n  return <SheetPrimitive.Root data-slot=\"sheet\" {...props} />\n}\n\nfunction SheetTrigger({\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Trigger>) {\n  return <SheetPrimitive.Trigger data-slot=\"sheet-trigger\" {...props} />\n}\n\nfunction SheetClose({\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Close>) {\n  return <SheetPrimitive.Close data-slot=\"sheet-close\" {...props} />\n}\n\nfunction SheetPortal({\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Portal>) {\n  return <SheetPrimitive.Portal data-slot=\"sheet-portal\" {...props} />\n}\n\nfunction SheetOverlay({\n  className,\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Overlay>) {\n  return (\n    <SheetPrimitive.Overlay\n      data-slot=\"sheet-overlay\"\n      className={cn(\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SheetContent({\n  className,\n  children,\n  side = \"right\",\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Content> & {\n  side?: \"top\" | \"right\" | \"bottom\" | \"left\"\n}) {\n  return (\n    <SheetPortal>\n      <SheetOverlay />\n      <SheetPrimitive.Content\n        data-slot=\"sheet-content\"\n        className={cn(\n          \"bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n          side === \"right\" &&\n            \"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm\",\n          side === \"left\" &&\n            \"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm\",\n          side === \"top\" &&\n            \"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b\",\n          side === \"bottom\" &&\n            \"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n        <SheetPrimitive.Close className=\"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none\">\n          <XIcon className=\"size-4\" />\n          <span className=\"sr-only\">Close</span>\n        </SheetPrimitive.Close>\n      </SheetPrimitive.Content>\n    </SheetPortal>\n  )\n}\n\nfunction SheetHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sheet-header\"\n      className={cn(\"flex flex-col gap-1.5 p-4\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SheetFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sheet-footer\"\n      className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SheetTitle({\n  className,\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Title>) {\n  return (\n    <SheetPrimitive.Title\n      data-slot=\"sheet-title\"\n      className={cn(\"text-foreground font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SheetDescription({\n  className,\n  ...props\n}: React.ComponentProps<typeof SheetPrimitive.Description>) {\n  return (\n    <SheetPrimitive.Description\n      data-slot=\"sheet-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sheet,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAGA;AACA;AAEA;AANA;;;;;AAQA,SAAS,MAAM,EAAE,GAAG,OAAyD;IAC3E,qBAAO,0bAAC,2XAAmB;QAAC,aAAU;QAAS,GAAG,KAAK;;;;;;AACzD;AAEA,SAAS,aAAa,EACpB,GAAG,OACiD;IACpD,qBAAO,0bAAC,8XAAsB;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;AAEA,SAAS,WAAW,EAClB,GAAG,OAC+C;IAClD,qBAAO,0bAAC,4XAAoB;QAAC,aAAU;QAAe,GAAG,KAAK;;;;;;AAChE;AAEA,SAAS,YAAY,EACnB,GAAG,OACgD;IACnD,qBAAO,0bAAC,6XAAqB;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;AAEA,SAAS,aAAa,EACpB,SAAS,EACT,GAAG,OACiD;IACpD,qBACE,0bAAC,8XAAsB;QACrB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,0JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,aAAa,EACpB,SAAS,EACT,QAAQ,EACR,OAAO,OAAO,EACd,GAAG,OAGJ;IACC,qBACE,0bAAC;;0BACC,0bAAC;;;;;0BACD,0bAAC,8XAAsB;gBACrB,aAAU;gBACV,WAAW,IAAA,kHAAE,EACX,8MACA,SAAS,WACP,oIACF,SAAS,UACP,iIACF,SAAS,SACP,4GACF,SAAS,YACP,qHACF;gBAED,GAAG,KAAK;;oBAER;kCACD,0bAAC,4XAAoB;wBAAC,WAAU;;0CAC9B,0bAAC,6RAAK;gCAAC,WAAU;;;;;;0CACjB,0bAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAKpC;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,0bAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,6BAA6B;QAC1C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,0bAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,mCAAmC;QAChD,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAClB,SAAS,EACT,GAAG,OAC+C;IAClD,qBACE,0bAAC,4XAAoB;QACnB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,iBAAiB,EACxB,SAAS,EACT,GAAG,OACqD;IACxD,qBACE,0bAAC,kYAA0B;QACzB,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 1015, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/sanity/env.ts"],"sourcesContent":["export const apiVersion =\n  process.env.NEXT_PUBLIC_SANITY_API_VERSION || '2025-12-05'\n\nexport const dataset = assertValue(\n  process.env.NEXT_PUBLIC_SANITY_DATASET,\n  'Missing environment variable: NEXT_PUBLIC_SANITY_DATASET'\n)\n\nexport const projectId = assertValue(\n  process.env.NEXT_PUBLIC_SANITY_PROJECT_ID,\n  'Missing environment variable: NEXT_PUBLIC_SANITY_PROJECT_ID'\n)\n\nfunction assertValue<T>(v: T | undefined, errorMessage: string): T {\n  if (v === undefined) {\n    throw new Error(errorMessage)\n  }\n\n  return v\n}\n"],"names":[],"mappings":";;;;;;;;AAAO,MAAM,aACX,QAAQ,GAAG,CAAC,8BAA8B,IAAI;AAEzC,MAAM,UAAU,4DAErB;AAGK,MAAM,YAAY,0DAEvB;AAGF,SAAS,YAAe,CAAgB,EAAE,YAAoB;IAC5D,IAAI,MAAM,WAAW;QACnB,MAAM,IAAI,MAAM;IAClB;IAEA,OAAO;AACT"}},
    {"offset": {"line": 1036, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/sanity/lib/client.ts"],"sourcesContent":["import { createClient } from \"next-sanity\";\n\nimport { apiVersion, dataset, projectId } from \"../env\";\n\n// Read-only client (for fetching data)\nexport const client = createClient({\n  projectId,\n  dataset,\n  apiVersion,\n  useCdn: false, // Set to false if statically generating pages, using ISR or tag-based revalidation\n  perspective: \"published\",\n});\n\n// Write client (for mutations - used in webhooks/server actions)\nexport const writeClient = createClient({\n  projectId,\n  dataset,\n  apiVersion,\n  useCdn: false,\n  token: process.env.SANITY_API_WRITE_TOKEN,\n});\n"],"names":[],"mappings":";;;;;;AAAA;AAEA;;;AAGO,MAAM,SAAS,IAAA,wQAAY,EAAC;IACjC,WAAA,0HAAS;IACT,SAAA,wHAAO;IACP,YAAA,2HAAU;IACV,QAAQ;IACR,aAAa;AACf;AAGO,MAAM,cAAc,IAAA,wQAAY,EAAC;IACtC,WAAA,0HAAS;IACT,SAAA,wHAAO;IACP,YAAA,2HAAU;IACV,QAAQ;IACR,OAAO,QAAQ,GAAG,CAAC,sBAAsB;AAC3C"}},
    {"offset": {"line": 1064, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/lib/constants/stock.ts"],"sourcesContent":["/**\n * Stock threshold for \"low stock\" warnings\n * Products at or below this level will show low stock indicators\n */\nexport const LOW_STOCK_THRESHOLD = 5;\n\n/**\n * Check if a product is considered low stock\n * @param stock - Current stock count\n * @returns true if stock is above 0 but at or below the threshold\n */\nexport const isLowStock = (stock: number): boolean =>\n  stock > 0 && stock <= LOW_STOCK_THRESHOLD;\n\n/**\n * Check if a product is out of stock\n * @param stock - Current stock count\n * @returns true if stock is 0 or less\n */\nexport const isOutOfStock = (stock: number): boolean => stock <= 0;\n\n/**\n * Get stock status for display purposes\n * @param stock - Current stock count\n * @returns Stock status: \"out_of_stock\", \"low_stock\", or \"in_stock\"\n */\nexport const getStockStatus = (\n  stock: number | null | undefined\n): \"out_of_stock\" | \"low_stock\" | \"in_stock\" | \"unknown\" => {\n  if (stock === null || stock === undefined) return \"unknown\";\n  if (stock <= 0) return \"out_of_stock\";\n  if (stock <= LOW_STOCK_THRESHOLD) return \"low_stock\";\n  return \"in_stock\";\n};\n\n/**\n * Get human-readable stock message\n * @param stock - Current stock count\n * @returns Descriptive stock message\n */\nexport const getStockMessage = (stock: number | null | undefined): string => {\n  const status = getStockStatus(stock);\n  switch (status) {\n    case \"out_of_stock\":\n      return \"OUT OF STOCK - Currently unavailable\";\n    case \"low_stock\":\n      return `LOW STOCK - Only ${stock} left`;\n    case \"in_stock\":\n      return `In stock (${stock} available)`;\n    default:\n      return \"Stock status unknown\";\n  }\n};\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;;;;;;;AACM,MAAM,sBAAsB;AAO5B,MAAM,aAAa,CAAC,QACzB,QAAQ,KAAK,SAAS;AAOjB,MAAM,eAAe,CAAC,QAA2B,SAAS;AAO1D,MAAM,iBAAiB,CAC5B;IAEA,IAAI,UAAU,QAAQ,UAAU,WAAW,OAAO;IAClD,IAAI,SAAS,GAAG,OAAO;IACvB,IAAI,SAAS,qBAAqB,OAAO;IACzC,OAAO;AACT;AAOO,MAAM,kBAAkB,CAAC;IAC9B,MAAM,SAAS,eAAe;IAC9B,OAAQ;QACN,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO,CAAC,iBAAiB,EAAE,MAAM,KAAK,CAAC;QACzC,KAAK;YACH,OAAO,CAAC,UAAU,EAAE,MAAM,WAAW,CAAC;QACxC;YACE,OAAO;IACX;AACF"}},
    {"offset": {"line": 1105, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/lib/sanity/queries/products.ts"],"sourcesContent":["import { defineQuery } from \"next-sanity\";\nimport { LOW_STOCK_THRESHOLD } from \"@/lib/constants/stock\";\n\n// ============================================\n// Shared Query Fragments (DRY)\n// ============================================\n\n/** Common filter conditions for product filtering */\nconst PRODUCT_FILTER_CONDITIONS = `\n  _type == \"product\"\n  && ($categorySlug == \"\" || category->slug.current == $categorySlug)\n  && ($color == \"\" || color == $color)\n  && ($material == \"\" || material == $material)\n  && ($minPrice == 0 || price >= $minPrice)\n  && ($maxPrice == 0 || price <= $maxPrice)\n  && ($searchQuery == \"\" || name match $searchQuery + \"*\" || description match $searchQuery + \"*\")\n  && ($inStock == false || stock > 0)\n`;\n\n/** Projection for filtered product lists (includes multiple images for hover) */\nconst FILTERED_PRODUCT_PROJECTION = `{\n  _id,\n  name,\n  \"slug\": slug.current,\n  price,\n  \"images\": images[0...4]{\n    _key,\n    asset->{\n      _id,\n      url\n    }\n  },\n  category->{\n    _id,\n    title,\n    \"slug\": slug.current\n  },\n  material,\n  color,\n  stock\n}`;\n\n/** Scoring for relevance-based search */\nconst RELEVANCE_SCORE = `score(\n  boost(name match $searchQuery + \"*\", 3),\n  boost(description match $searchQuery + \"*\", 1)\n)`;\n\n// ============================================\n// All Products Query\n// ============================================\n\n/**\n * Get all products with category expanded\n * Used on landing page\n */\nexport const ALL_PRODUCTS_QUERY = defineQuery(`*[\n  _type == \"product\"\n] | order(name asc) {\n  _id,\n  name,\n  \"slug\": slug.current,\n  description,\n  price,\n  \"images\": images[]{\n    _key,\n    asset->{\n      _id,\n      url\n    },\n    hotspot\n  },\n  category->{\n    _id,\n    title,\n    \"slug\": slug.current\n  },\n  material,\n  color,\n  dimensions,\n  stock,\n  featured,\n  assemblyRequired\n}`);\n\n/**\n * Get featured products for homepage carousel\n */\nexport const FEATURED_PRODUCTS_QUERY = defineQuery(`*[\n  _type == \"product\"\n  && featured == true\n  && stock > 0\n] | order(name asc) [0...6] {\n  _id,\n  name,\n  \"slug\": slug.current,\n  description,\n  price,\n  \"images\": images[]{\n    _key,\n    asset->{\n      _id,\n      url\n    },\n    hotspot\n  },\n  category->{\n    _id,\n    title,\n    \"slug\": slug.current\n  },\n  stock\n}`);\n\n/**\n * Get products by category slug\n */\nexport const PRODUCTS_BY_CATEGORY_QUERY = defineQuery(`*[\n  _type == \"product\"\n  && category->slug.current == $categorySlug\n] | order(name asc) {\n  _id,\n  name,\n  \"slug\": slug.current,\n  price,\n  \"image\": images[0]{\n    asset->{\n      _id,\n      url\n    },\n    hotspot\n  },\n  category->{\n    _id,\n    title,\n    \"slug\": slug.current\n  },\n  material,\n  color,\n  stock\n}`);\n\n/**\n * Get single product by slug\n * Used on product detail page\n */\nexport const PRODUCT_BY_SLUG_QUERY = defineQuery(`*[\n  _type == \"product\"\n  && slug.current == $slug\n][0] {\n  _id,\n  name,\n  \"slug\": slug.current,\n  description,\n  price,\n  \"images\": images[]{\n    _key,\n    asset->{\n      _id,\n      url\n    },\n    hotspot\n  },\n  category->{\n    _id,\n    title,\n    \"slug\": slug.current\n  },\n  material,\n  color,\n  dimensions,\n  stock,\n  featured,\n  assemblyRequired\n}`);\n\n// ============================================\n// Search & Filter Queries (Server-Side)\n// Uses GROQ score() for relevance ranking\n// ============================================\n\n/**\n * Search products with relevance scoring\n * Uses score() + boost() for better ranking\n * Orders by relevance score descending\n */\nexport const SEARCH_PRODUCTS_QUERY = defineQuery(`*[\n  _type == \"product\"\n  && (\n    name match $searchQuery + \"*\"\n    || description match $searchQuery + \"*\"\n  )\n] | score(\n  boost(name match $searchQuery + \"*\", 3),\n  boost(description match $searchQuery + \"*\", 1)\n) | order(_score desc) {\n  _id,\n  _score,\n  name,\n  \"slug\": slug.current,\n  price,\n  \"image\": images[0]{\n    asset->{\n      _id,\n      url\n    },\n    hotspot\n  },\n  category->{\n    _id,\n    title,\n    \"slug\": slug.current\n  },\n  material,\n  color,\n  stock\n}`);\n\n/**\n * Filter products - ordered by name (A-Z)\n * Returns up to 4 images for hover preview in product cards\n */\nexport const FILTER_PRODUCTS_BY_NAME_QUERY = defineQuery(\n  `*[${PRODUCT_FILTER_CONDITIONS}] | order(name asc) ${FILTERED_PRODUCT_PROJECTION}`\n);\n\n/**\n * Filter products - ordered by price ascending\n * Returns up to 4 images for hover preview in product cards\n */\nexport const FILTER_PRODUCTS_BY_PRICE_ASC_QUERY = defineQuery(\n  `*[${PRODUCT_FILTER_CONDITIONS}] | order(price asc) ${FILTERED_PRODUCT_PROJECTION}`\n);\n\n/**\n * Filter products - ordered by price descending\n * Returns up to 4 images for hover preview in product cards\n */\nexport const FILTER_PRODUCTS_BY_PRICE_DESC_QUERY = defineQuery(\n  `*[${PRODUCT_FILTER_CONDITIONS}] | order(price desc) ${FILTERED_PRODUCT_PROJECTION}`\n);\n\n/**\n * Filter products - ordered by relevance (when searching)\n * Uses score() for search term matching\n * Returns up to 4 images for hover preview in product cards\n */\nexport const FILTER_PRODUCTS_BY_RELEVANCE_QUERY = defineQuery(\n  `*[${PRODUCT_FILTER_CONDITIONS}] | ${RELEVANCE_SCORE} | order(_score desc, name asc) ${FILTERED_PRODUCT_PROJECTION}`\n);\n\n/**\n * Get products by IDs (for cart/checkout)\n */\nexport const PRODUCTS_BY_IDS_QUERY = defineQuery(`*[\n  _type == \"product\"\n  && _id in $ids\n] {\n  _id,\n  name,\n  \"slug\": slug.current,\n  price,\n  \"image\": images[0]{\n    asset->{\n      _id,\n      url\n    },\n    hotspot\n  },\n  stock\n}`);\n\n/**\n * Get low stock products (admin)\n * Uses LOW_STOCK_THRESHOLD constant for consistency\n */\nexport const LOW_STOCK_PRODUCTS_QUERY = defineQuery(`*[\n  _type == \"product\"\n  && stock > 0\n  && stock <= ${LOW_STOCK_THRESHOLD}\n] | order(stock asc) {\n  _id,\n  name,\n  \"slug\": slug.current,\n  stock,\n  \"image\": images[0]{\n    asset->{\n      _id,\n      url\n    }\n  }\n}`);\n\n/**\n * Get out of stock products (admin)\n */\nexport const OUT_OF_STOCK_PRODUCTS_QUERY = defineQuery(`*[\n  _type == \"product\"\n  && stock == 0\n] | order(name asc) {\n  _id,\n  name,\n  \"slug\": slug.current,\n  \"image\": images[0]{\n    asset->{\n      _id,\n      url\n    }\n  }\n}`);\n\n// ============================================\n// AI Shopping Assistant Query\n// Uses score() + boost() with all filters for AI agent\n// ============================================\n\n/**\n * Search products for AI shopping assistant\n * Full-featured search with all filters and product details\n */\nexport const AI_SEARCH_PRODUCTS_QUERY = defineQuery(`*[\n  _type == \"product\"\n  && (\n    $searchQuery == \"\"\n    || name match $searchQuery + \"*\"\n    || description match $searchQuery + \"*\"\n    || category->title match $searchQuery + \"*\"\n  )\n  && ($categorySlug == \"\" || category->slug.current == $categorySlug)\n  && ($material == \"\" || material == $material)\n  && ($color == \"\" || color == $color)\n  && ($minPrice == 0 || price >= $minPrice)\n  && ($maxPrice == 0 || price <= $maxPrice)\n] | order(name asc) [0...20] {\n  _id,\n  name,\n  \"slug\": slug.current,\n  description,\n  price,\n  \"image\": images[0]{\n    asset->{\n      _id,\n      url\n    }\n  },\n  category->{\n    _id,\n    title,\n    \"slug\": slug.current\n  },\n  material,\n  color,\n  dimensions,\n  stock,\n  featured,\n  assemblyRequired\n}`);\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;;;AAEA,+CAA+C;AAC/C,+BAA+B;AAC/B,+CAA+C;AAE/C,mDAAmD,GACnD,MAAM,4BAA4B,CAAC;;;;;;;;;AASnC,CAAC;AAED,+EAA+E,GAC/E,MAAM,8BAA8B,CAAC;;;;;;;;;;;;;;;;;;;;CAoBpC,CAAC;AAEF,uCAAuC,GACvC,MAAM,kBAAkB,CAAC;;;CAGxB,CAAC;AAUK,MAAM,qBAAqB,IAAA,oMAAW,EAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;CA2B9C,CAAC;AAKK,MAAM,0BAA0B,IAAA,oMAAW,EAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;CAwBnD,CAAC;AAKK,MAAM,6BAA6B,IAAA,oMAAW,EAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;CAuBtD,CAAC;AAMK,MAAM,wBAAwB,IAAA,oMAAW,EAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA4BjD,CAAC;AAYK,MAAM,wBAAwB,IAAA,oMAAW,EAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA8BjD,CAAC;AAMK,MAAM,gCAAgC,IAAA,oMAAW,EACtD,CAAC,EAAE,EAAE,0BAA0B,oBAAoB,EAAE,6BAA6B;AAO7E,MAAM,qCAAqC,IAAA,oMAAW,EAC3D,CAAC,EAAE,EAAE,0BAA0B,qBAAqB,EAAE,6BAA6B;AAO9E,MAAM,sCAAsC,IAAA,oMAAW,EAC5D,CAAC,EAAE,EAAE,0BAA0B,sBAAsB,EAAE,6BAA6B;AAQ/E,MAAM,qCAAqC,IAAA,oMAAW,EAC3D,CAAC,EAAE,EAAE,0BAA0B,IAAI,EAAE,gBAAgB,gCAAgC,EAAE,6BAA6B;AAM/G,MAAM,wBAAwB,IAAA,oMAAW,EAAC,CAAC;;;;;;;;;;;;;;;;CAgBjD,CAAC;AAMK,MAAM,2BAA2B,IAAA,oMAAW,EAAC,CAAC;;;cAGvC,EAAE,gJAAmB,CAAC;;;;;;;;;;;;CAYnC,CAAC;AAKK,MAAM,8BAA8B,IAAA,oMAAW,EAAC,CAAC;;;;;;;;;;;;;CAavD,CAAC;AAWK,MAAM,2BAA2B,IAAA,oMAAW,EAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAoCpD,CAAC"}},
    {"offset": {"line": 1404, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/lib/hooks/useCartStock.ts"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState, useCallback, useMemo } from \"react\";\nimport { client } from \"@/sanity/lib/client\";\nimport { PRODUCTS_BY_IDS_QUERY } from \"@/lib/sanity/queries/products\";\nimport type { CartItem } from \"@/lib/store/cart-store\";\n\nexport interface StockInfo {\n  productId: string;\n  currentStock: number;\n  isOutOfStock: boolean;\n  exceedsStock: boolean;\n  availableQuantity: number;\n}\n\nexport type StockMap = Map<string, StockInfo>;\n\ninterface UseCartStockReturn {\n  stockMap: StockMap;\n  isLoading: boolean;\n  hasStockIssues: boolean;\n  refetch: () => void;\n}\n\n/**\n * Fetches current stock levels for cart items\n * Returns stock info map and loading state\n */\nexport function useCartStock(items: CartItem[]): UseCartStockReturn {\n  const [stockMap, setStockMap] = useState<StockMap>(new Map());\n  const [isLoading, setIsLoading] = useState(false);\n\n  // Memoize product IDs to use as stable dependency\n  const productIds = useMemo(\n    () => items.map((item) => item.productId),\n    [items]\n  );\n\n  const fetchStock = useCallback(async () => {\n    if (items.length === 0) {\n      setStockMap(new Map());\n      return;\n    }\n\n    setIsLoading(true);\n\n    try {\n      const products = await client.fetch(PRODUCTS_BY_IDS_QUERY, {\n        ids: productIds,\n      });\n\n      const newStockMap = new Map<string, StockInfo>();\n\n      for (const item of items) {\n        const product = products.find(\n          (p: { _id: string }) => p._id === item.productId\n        );\n        const currentStock = product?.stock ?? 0;\n\n        newStockMap.set(item.productId, {\n          productId: item.productId,\n          currentStock,\n          isOutOfStock: currentStock === 0,\n          exceedsStock: item.quantity > currentStock,\n          availableQuantity: Math.min(item.quantity, currentStock),\n        });\n      }\n\n      setStockMap(newStockMap);\n    } catch (error) {\n      console.error(\"Failed to fetch stock:\", error);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [items, productIds]);\n\n  useEffect(() => {\n    fetchStock();\n  }, [fetchStock]);\n\n  const hasStockIssues = Array.from(stockMap.values()).some(\n    (info) => info.isOutOfStock || info.exceedsStock\n  );\n\n  return {\n    stockMap,\n    isLoading,\n    hasStockIssues,\n    refetch: fetchStock,\n  };\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;AA4BO,SAAS,aAAa,KAAiB;IAC5C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,6ZAAQ,EAAW,IAAI;IACvD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,6ZAAQ,EAAC;IAE3C,kDAAkD;IAClD,MAAM,aAAa,IAAA,4ZAAO,EACxB,IAAM,MAAM,GAAG,CAAC,CAAC,OAAS,KAAK,SAAS,GACxC;QAAC;KAAM;IAGT,MAAM,aAAa,IAAA,gaAAW,EAAC;QAC7B,IAAI,MAAM,MAAM,KAAK,GAAG;YACtB,YAAY,IAAI;YAChB;QACF;QAEA,aAAa;QAEb,IAAI;YACF,MAAM,WAAW,MAAM,iIAAM,CAAC,KAAK,CAAC,6JAAqB,EAAE;gBACzD,KAAK;YACP;YAEA,MAAM,cAAc,IAAI;YAExB,KAAK,MAAM,QAAQ,MAAO;gBACxB,MAAM,UAAU,SAAS,IAAI,CAC3B,CAAC,IAAuB,EAAE,GAAG,KAAK,KAAK,SAAS;gBAElD,MAAM,eAAe,SAAS,SAAS;gBAEvC,YAAY,GAAG,CAAC,KAAK,SAAS,EAAE;oBAC9B,WAAW,KAAK,SAAS;oBACzB;oBACA,cAAc,iBAAiB;oBAC/B,cAAc,KAAK,QAAQ,GAAG;oBAC9B,mBAAmB,KAAK,GAAG,CAAC,KAAK,QAAQ,EAAE;gBAC7C;YACF;YAEA,YAAY;QACd,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,0BAA0B;QAC1C,SAAU;YACR,aAAa;QACf;IACF,GAAG;QAAC;QAAO;KAAW;IAEtB,IAAA,8ZAAS,EAAC;QACR;IACF,GAAG;QAAC;KAAW;IAEf,MAAM,iBAAiB,MAAM,IAAI,CAAC,SAAS,MAAM,IAAI,IAAI,CACvD,CAAC,OAAS,KAAK,YAAY,IAAI,KAAK,YAAY;IAGlD,OAAO;QACL;QACA;QACA;QACA,SAAS;IACX;AACF"}},
    {"offset": {"line": 1471, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/components/app/AddToCartButton.tsx"],"sourcesContent":["\"use client\";\n\nimport { Minus, Plus, ShoppingBag } from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport { Button } from \"@/components/ui/button\";\nimport { useCartActions, useCartItem } from \"@/lib/store/cart-store-provider\";\nimport { cn } from \"@/lib/utils\";\n\ninterface AddToCartButtonProps {\n  productId: string;\n  name: string;\n  price: number;\n  image?: string;\n  stock: number;\n  className?: string;\n}\n\nexport function AddToCartButton({\n  productId,\n  name,\n  price,\n  image,\n  stock,\n  className,\n}: AddToCartButtonProps) {\n  const { addItem, updateQuantity } = useCartActions();\n  const cartItem = useCartItem(productId);\n\n  const quantityInCart = cartItem?.quantity ?? 0;\n  const isOutOfStock = stock <= 0;\n  const isAtMax = quantityInCart >= stock;\n\n  const handleAdd = () => {\n    if (quantityInCart < stock) {\n      addItem({ productId, name, price, image }, 1);\n      toast.success(`Added ${name}`);\n    }\n  };\n\n  const handleDecrement = () => {\n    if (quantityInCart > 0) {\n      updateQuantity(productId, quantityInCart - 1);\n    }\n  };\n\n  // Out of stock\n  if (isOutOfStock) {\n    return (\n      <Button\n        disabled\n        variant=\"secondary\"\n        className={cn(\"h-11 w-full\", className)}\n      >\n        Out of Stock\n      </Button>\n    );\n  }\n\n  // Not in cart - show Add to Basket button\n  if (quantityInCart === 0) {\n    return (\n      <Button onClick={handleAdd} className={cn(\"h-11 w-full\", className)}>\n        <ShoppingBag className=\"mr-2 h-4 w-4\" />\n        Add to Basket\n      </Button>\n    );\n  }\n\n  // In cart - show quantity controls\n  return (\n    <div\n      className={cn(\n        \"flex h-11 w-full items-center rounded-md border border-zinc-200 bg-white dark:border-zinc-700 dark:bg-zinc-900\",\n        className,\n      )}\n    >\n      <Button\n        variant=\"ghost\"\n        size=\"icon\"\n        className=\"h-full flex-1 rounded-r-none\"\n        onClick={handleDecrement}\n      >\n        <Minus className=\"h-4 w-4\" />\n      </Button>\n      <span className=\"flex-1 text-center text-sm font-semibold tabular-nums\">\n        {quantityInCart}\n      </span>\n      <Button\n        variant=\"ghost\"\n        size=\"icon\"\n        className=\"h-full flex-1 rounded-l-none disabled:opacity-20\"\n        onClick={handleAdd}\n        disabled={isAtMax}\n      >\n        <Plus className=\"h-4 w-4\" />\n      </Button>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAiBO,SAAS,gBAAgB,EAC9B,SAAS,EACT,IAAI,EACJ,KAAK,EACL,KAAK,EACL,KAAK,EACL,SAAS,EACY;IACrB,MAAM,EAAE,OAAO,EAAE,cAAc,EAAE,GAAG,IAAA,4JAAc;IAClD,MAAM,WAAW,IAAA,yJAAW,EAAC;IAE7B,MAAM,iBAAiB,UAAU,YAAY;IAC7C,MAAM,eAAe,SAAS;IAC9B,MAAM,UAAU,kBAAkB;IAElC,MAAM,YAAY;QAChB,IAAI,iBAAiB,OAAO;YAC1B,QAAQ;gBAAE;gBAAW;gBAAM;gBAAO;YAAM,GAAG;YAC3C,iRAAK,CAAC,OAAO,CAAC,CAAC,MAAM,EAAE,MAAM;QAC/B;IACF;IAEA,MAAM,kBAAkB;QACtB,IAAI,iBAAiB,GAAG;YACtB,eAAe,WAAW,iBAAiB;QAC7C;IACF;IAEA,eAAe;IACf,IAAI,cAAc;QAChB,qBACE,0bAAC,qIAAM;YACL,QAAQ;YACR,SAAQ;YACR,WAAW,IAAA,kHAAE,EAAC,eAAe;sBAC9B;;;;;;IAIL;IAEA,0CAA0C;IAC1C,IAAI,mBAAmB,GAAG;QACxB,qBACE,0bAAC,qIAAM;YAAC,SAAS;YAAW,WAAW,IAAA,kHAAE,EAAC,eAAe;;8BACvD,0bAAC,uTAAW;oBAAC,WAAU;;;;;;gBAAiB;;;;;;;IAI9C;IAEA,mCAAmC;IACnC,qBACE,0bAAC;QACC,WAAW,IAAA,kHAAE,EACX,kHACA;;0BAGF,0bAAC,qIAAM;gBACL,SAAQ;gBACR,MAAK;gBACL,WAAU;gBACV,SAAS;0BAET,cAAA,0bAAC,iSAAK;oBAAC,WAAU;;;;;;;;;;;0BAEnB,0bAAC;gBAAK,WAAU;0BACb;;;;;;0BAEH,0bAAC,qIAAM;gBACL,SAAQ;gBACR,MAAK;gBACL,WAAU;gBACV,SAAS;gBACT,UAAU;0BAEV,cAAA,0bAAC,8RAAI;oBAAC,WAAU;;;;;;;;;;;;;;;;;AAIxB"}},
    {"offset": {"line": 1604, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center justify-center rounded-full border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90\",\n        destructive:\n          \"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction Badge({\n  className,\n  variant,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"span\"> &\n  VariantProps<typeof badgeVariants> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"span\"\n\n  return (\n    <Comp\n      data-slot=\"badge\"\n      className={cn(badgeVariants({ variant }), className)}\n      {...props}\n    />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,IAAA,kPAAG,EACvB,oZACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,OAAO,EACP,UAAU,KAAK,EACf,GAAG,OAEuD;IAC1D,MAAM,OAAO,UAAU,4SAAI,GAAG;IAE9B,qBACE,0bAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 1650, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/components/app/StockBadge.tsx"],"sourcesContent":["\"use client\";\n\nimport { Badge } from \"@/components/ui/badge\";\nimport { useCartItem } from \"@/lib/store/cart-store-provider\";\nimport { cn } from \"@/lib/utils\";\nimport { isLowStock as checkLowStock } from \"@/lib/constants/stock\";\n\ninterface StockBadgeProps {\n  productId: string;\n  stock: number;\n  className?: string;\n}\n\nexport function StockBadge({ productId, stock, className }: StockBadgeProps) {\n  const cartItem = useCartItem(productId);\n\n  const quantityInCart = cartItem?.quantity ?? 0;\n  const isAtMax = quantityInCart >= stock && stock > 0;\n  const lowStock = checkLowStock(stock);\n\n  if (isAtMax) {\n    return (\n      <Badge\n        variant=\"secondary\"\n        className={cn(\"w-fit bg-blue-100 text-blue-800\", className)}\n      >\n        Max in cart\n      </Badge>\n    );\n  }\n\n  if (lowStock) {\n    return (\n      <Badge\n        variant=\"secondary\"\n        className={cn(\"w-fit bg-amber-100 text-amber-800\", className)}\n      >\n        Only {stock} left in stock\n      </Badge>\n    );\n  }\n\n  return null;\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAaO,SAAS,WAAW,EAAE,SAAS,EAAE,KAAK,EAAE,SAAS,EAAmB;IACzE,MAAM,WAAW,IAAA,yJAAW,EAAC;IAE7B,MAAM,iBAAiB,UAAU,YAAY;IAC7C,MAAM,UAAU,kBAAkB,SAAS,QAAQ;IACnD,MAAM,WAAW,IAAA,uIAAa,EAAC;IAE/B,IAAI,SAAS;QACX,qBACE,0bAAC,mIAAK;YACJ,SAAQ;YACR,WAAW,IAAA,kHAAE,EAAC,mCAAmC;sBAClD;;;;;;IAIL;IAEA,IAAI,UAAU;QACZ,qBACE,0bAAC,mIAAK;YACJ,SAAQ;YACR,WAAW,IAAA,kHAAE,EAAC,qCAAqC;;gBACpD;gBACO;gBAAM;;;;;;;IAGlB;IAEA,OAAO;AACT"}},
    {"offset": {"line": 1702, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/components/app/CartItem.tsx"],"sourcesContent":["\"use client\";\n\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport { Trash2 } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useCartActions } from \"@/lib/store/cart-store-provider\";\nimport { AddToCartButton } from \"@/components/app/AddToCartButton\";\nimport { StockBadge } from \"@/components/app/StockBadge\";\nimport { cn, formatPrice } from \"@/lib/utils\";\nimport type { CartItem as CartItemType } from \"@/lib/store/cart-store\";\nimport type { StockInfo } from \"@/lib/hooks/useCartStock\";\n\ninterface CartItemProps {\n  item: CartItemType;\n  stockInfo?: StockInfo;\n}\n\nexport function CartItem({ item, stockInfo }: CartItemProps) {\n  const { removeItem } = useCartActions();\n\n  const isOutOfStock = stockInfo?.isOutOfStock ?? false;\n  const exceedsStock = stockInfo?.exceedsStock ?? false;\n  const currentStock = stockInfo?.currentStock ?? 999;\n  const hasIssue = isOutOfStock || exceedsStock;\n\n  return (\n    <div\n      className={cn(\n        \"flex gap-4 py-4\",\n        hasIssue && \"rounded-lg bg-red-50 p-3 dark:bg-red-950/30\",\n      )}\n    >\n      {/* Image */}\n      <div\n        className={cn(\n          \"relative h-20 w-20 shrink-0 overflow-hidden rounded-md bg-zinc-100 dark:bg-zinc-800\",\n          isOutOfStock && \"opacity-50\",\n        )}\n      >\n        {item.image ? (\n          <Image\n            src={item.image}\n            alt={item.name}\n            fill\n            className=\"object-cover\"\n            sizes=\"80px\"\n          />\n        ) : (\n          <div className=\"flex h-full items-center justify-center text-xs text-zinc-400\">\n            No image\n          </div>\n        )}\n      </div>\n\n      {/* Details */}\n      <div className=\"flex flex-1 flex-col\">\n        <div className=\"flex justify-between\">\n          <Link\n            href={`/products/${item.productId}`}\n            className={cn(\n              \"font-medium text-zinc-900 hover:text-zinc-600 dark:text-zinc-100 dark:hover:text-zinc-300\",\n              isOutOfStock && \"text-zinc-400 dark:text-zinc-500\",\n            )}\n          >\n            {item.name}\n          </Link>\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"h-8 w-8 text-zinc-400 hover:text-red-500\"\n            onClick={() => removeItem(item.productId)}\n          >\n            <Trash2 className=\"h-4 w-4\" />\n            <span className=\"sr-only\">Remove {item.name}</span>\n          </Button>\n        </div>\n\n        <p className=\"mt-1 text-sm font-medium text-zinc-900 dark:text-zinc-100\">\n          {formatPrice(item.price)}\n        </p>\n\n        {/* Stock Badge & Quantity Controls */}\n        <div className=\"mt-2 flex flex-row justify-between items-center gap-2\">\n          <StockBadge productId={item.productId} stock={currentStock} />\n          {!isOutOfStock && (\n            <div className=\"w-32 flex self-end ml-auto\">\n              <AddToCartButton\n                productId={item.productId}\n                name={item.name}\n                price={item.price}\n                image={item.image}\n                stock={currentStock}\n              />\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;;;;;;;;;;AAkBO,SAAS,SAAS,EAAE,IAAI,EAAE,SAAS,EAAiB;IACzD,MAAM,EAAE,UAAU,EAAE,GAAG,IAAA,4JAAc;IAErC,MAAM,eAAe,WAAW,gBAAgB;IAChD,MAAM,eAAe,WAAW,gBAAgB;IAChD,MAAM,eAAe,WAAW,gBAAgB;IAChD,MAAM,WAAW,gBAAgB;IAEjC,qBACE,0bAAC;QACC,WAAW,IAAA,kHAAE,EACX,mBACA,YAAY;;0BAId,0bAAC;gBACC,WAAW,IAAA,kHAAE,EACX,uFACA,gBAAgB;0BAGjB,KAAK,KAAK,iBACT,0bAAC,oVAAK;oBACJ,KAAK,KAAK,KAAK;oBACf,KAAK,KAAK,IAAI;oBACd,IAAI;oBACJ,WAAU;oBACV,OAAM;;;;;yCAGR,0bAAC;oBAAI,WAAU;8BAAgE;;;;;;;;;;;0BAOnF,0bAAC;gBAAI,WAAU;;kCACb,0bAAC;wBAAI,WAAU;;0CACb,0bAAC,mXAAI;gCACH,MAAM,CAAC,UAAU,EAAE,KAAK,SAAS,EAAE;gCACnC,WAAW,IAAA,kHAAE,EACX,6FACA,gBAAgB;0CAGjB,KAAK,IAAI;;;;;;0CAEZ,0bAAC,qIAAM;gCACL,SAAQ;gCACR,MAAK;gCACL,WAAU;gCACV,SAAS,IAAM,WAAW,KAAK,SAAS;;kDAExC,0bAAC,wSAAM;wCAAC,WAAU;;;;;;kDAClB,0bAAC;wCAAK,WAAU;;4CAAU;4CAAQ,KAAK,IAAI;;;;;;;;;;;;;;;;;;;kCAI/C,0bAAC;wBAAE,WAAU;kCACV,IAAA,2HAAW,EAAC,KAAK,KAAK;;;;;;kCAIzB,0bAAC;wBAAI,WAAU;;0CACb,0bAAC,8IAAU;gCAAC,WAAW,KAAK,SAAS;gCAAE,OAAO;;;;;;4BAC7C,CAAC,8BACA,0bAAC;gCAAI,WAAU;0CACb,cAAA,0bAAC,wJAAe;oCACd,WAAW,KAAK,SAAS;oCACzB,MAAM,KAAK,IAAI;oCACf,OAAO,KAAK,KAAK;oCACjB,OAAO,KAAK,KAAK;oCACjB,OAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQvB"}},
    {"offset": {"line": 1870, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/components/app/CartSummary.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { Button } from \"@/components/ui/button\";\nimport { formatPrice } from \"@/lib/utils\";\nimport {\n  useTotalPrice,\n  useTotalItems,\n  useCartActions,\n} from \"@/lib/store/cart-store-provider\";\n\ninterface CartSummaryProps {\n  hasStockIssues?: boolean;\n}\n\nexport function CartSummary({ hasStockIssues = false }: CartSummaryProps) {\n  const totalPrice = useTotalPrice();\n  const totalItems = useTotalItems();\n  const { closeCart } = useCartActions();\n\n  if (totalItems === 0) return null;\n\n  return (\n    <div className=\"border-t border-zinc-200 p-4 dark:border-zinc-800\">\n      <div className=\"flex justify-between text-base font-medium text-zinc-900 dark:text-zinc-100\">\n        <span>Subtotal</span>\n        <span>{formatPrice(totalPrice)}</span>\n      </div>\n      <p className=\"mt-1 text-sm text-zinc-500 dark:text-zinc-400\">\n        Shipping calculated at checkout\n      </p>\n      <div className=\"mt-4\">\n        {hasStockIssues ? (\n          <Button disabled className=\"w-full\">\n            Resolve stock issues to checkout\n          </Button>\n        ) : (\n          <Button asChild className=\"w-full\">\n            <Link href=\"/checkout\" onClick={() => closeCart()}>\n              Checkout\n            </Link>\n          </Button>\n        )}\n      </div>\n      <div className=\"mt-3 text-center\">\n        <Link\n          href=\"/\"\n          className=\"text-sm text-zinc-500 hover:text-zinc-700 dark:text-zinc-400 dark:hover:text-zinc-200\"\n        >\n          Continue Shopping →\n        </Link>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAeO,SAAS,YAAY,EAAE,iBAAiB,KAAK,EAAoB;IACtE,MAAM,aAAa,IAAA,2JAAa;IAChC,MAAM,aAAa,IAAA,2JAAa;IAChC,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,4JAAc;IAEpC,IAAI,eAAe,GAAG,OAAO;IAE7B,qBACE,0bAAC;QAAI,WAAU;;0BACb,0bAAC;gBAAI,WAAU;;kCACb,0bAAC;kCAAK;;;;;;kCACN,0bAAC;kCAAM,IAAA,2HAAW,EAAC;;;;;;;;;;;;0BAErB,0bAAC;gBAAE,WAAU;0BAAgD;;;;;;0BAG7D,0bAAC;gBAAI,WAAU;0BACZ,+BACC,0bAAC,qIAAM;oBAAC,QAAQ;oBAAC,WAAU;8BAAS;;;;;yCAIpC,0bAAC,qIAAM;oBAAC,OAAO;oBAAC,WAAU;8BACxB,cAAA,0bAAC,mXAAI;wBAAC,MAAK;wBAAY,SAAS,IAAM;kCAAa;;;;;;;;;;;;;;;;0BAMzD,0bAAC;gBAAI,WAAU;0BACb,cAAA,0bAAC,mXAAI;oBACH,MAAK;oBACL,WAAU;8BACX;;;;;;;;;;;;;;;;;AAMT"}},
    {"offset": {"line": 1983, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/components/app/CartSheet.tsx"],"sourcesContent":["\"use client\";\n\nimport { AlertTriangle, Loader2, ShoppingBag } from \"lucide-react\";\nimport {\n  Sheet,\n  SheetContent,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\";\nimport {\n  useCartItems,\n  useCartIsOpen,\n  useCartActions,\n  useTotalItems,\n} from \"@/lib/store/cart-store-provider\";\nimport { useCartStock } from \"@/lib/hooks/useCartStock\";\nimport { CartItem } from \"./CartItem\";\nimport { CartSummary } from \"./CartSummary\";\n\nexport function CartSheet() {\n  const items = useCartItems();\n  const isOpen = useCartIsOpen();\n  const totalItems = useTotalItems();\n  const { closeCart } = useCartActions();\n  const { stockMap, isLoading, hasStockIssues } = useCartStock(items);\n\n  return (\n    <Sheet open={isOpen} onOpenChange={(open) => !open && closeCart()}>\n      <SheetContent className=\"flex w-full flex-col sm:max-w-lg gap-0\">\n        <SheetHeader className=\"border-b border-zinc-200 dark:border-zinc-800\">\n          <SheetTitle className=\"flex items-center gap-2\">\n            <ShoppingBag className=\"h-5 w-5\" />\n            Shopping Cart ({totalItems})\n            {isLoading && (\n              <Loader2 className=\"h-4 w-4 animate-spin text-zinc-400\" />\n            )}\n          </SheetTitle>\n        </SheetHeader>\n\n        {items.length === 0 ? (\n          <div className=\"flex flex-1 flex-col items-center justify-center text-center\">\n            <ShoppingBag className=\"h-12 w-12 text-zinc-300 dark:text-zinc-600\" />\n            <h3 className=\"mt-4 text-lg font-medium text-zinc-900 dark:text-zinc-100\">\n              Your cart is empty\n            </h3>\n            <p className=\"mt-1 text-sm text-zinc-500 dark:text-zinc-400\">\n              Add some items to get started\n            </p>\n          </div>\n        ) : (\n          <>\n            {/* Stock Issues Banner */}\n            {hasStockIssues && !isLoading && (\n              <div className=\"flex items-center gap-2 rounded-lg border border-amber-200 bg-amber-50 px-3 py-2 text-sm text-amber-800 dark:border-amber-800 dark:bg-amber-950/50 dark:text-amber-200\">\n                <AlertTriangle className=\"h-4 w-4 shrink-0\" />\n                <span>\n                  Some items have stock issues. Please review before checkout.\n                </span>\n              </div>\n            )}\n\n            {/* Cart Items */}\n            <div className=\"flex-1 overflow-y-auto px-5\">\n              <div className=\"space-y-2 py-2 divide-y divide-zinc-200 dark:divide-zinc-800\">\n                {items.map((item) => (\n                  <CartItem\n                    key={item.productId}\n                    item={item}\n                    stockInfo={stockMap.get(item.productId)}\n                  />\n                ))}\n              </div>\n            </div>\n\n            {/* Summary */}\n            <CartSummary hasStockIssues={hasStockIssues} />\n          </>\n        )}\n      </SheetContent>\n    </Sheet>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AACA;AAMA;AAMA;AACA;AACA;AAjBA;;;;;;;;AAmBO,SAAS;IACd,MAAM,QAAQ,IAAA,0JAAY;IAC1B,MAAM,SAAS,IAAA,2JAAa;IAC5B,MAAM,aAAa,IAAA,2JAAa;IAChC,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,4JAAc;IACpC,MAAM,EAAE,QAAQ,EAAE,SAAS,EAAE,cAAc,EAAE,GAAG,IAAA,4IAAY,EAAC;IAE7D,qBACE,0bAAC,mIAAK;QAAC,MAAM;QAAQ,cAAc,CAAC,OAAS,CAAC,QAAQ;kBACpD,cAAA,0bAAC,0IAAY;YAAC,WAAU;;8BACtB,0bAAC,yIAAW;oBAAC,WAAU;8BACrB,cAAA,0bAAC,wIAAU;wBAAC,WAAU;;0CACpB,0bAAC,uTAAW;gCAAC,WAAU;;;;;;4BAAY;4BACnB;4BAAW;4BAC1B,2BACC,0bAAC,gTAAO;gCAAC,WAAU;;;;;;;;;;;;;;;;;gBAKxB,MAAM,MAAM,KAAK,kBAChB,0bAAC;oBAAI,WAAU;;sCACb,0bAAC,uTAAW;4BAAC,WAAU;;;;;;sCACvB,0bAAC;4BAAG,WAAU;sCAA4D;;;;;;sCAG1E,0bAAC;4BAAE,WAAU;sCAAgD;;;;;;;;;;;yCAK/D;;wBAEG,kBAAkB,CAAC,2BAClB,0bAAC;4BAAI,WAAU;;8CACb,0bAAC,6TAAa;oCAAC,WAAU;;;;;;8CACzB,0bAAC;8CAAK;;;;;;;;;;;;sCAOV,0bAAC;4BAAI,WAAU;sCACb,cAAA,0bAAC;gCAAI,WAAU;0CACZ,MAAM,GAAG,CAAC,CAAC,qBACV,0bAAC,0IAAQ;wCAEP,MAAM;wCACN,WAAW,SAAS,GAAG,CAAC,KAAK,SAAS;uCAFjC,KAAK,SAAS;;;;;;;;;;;;;;;sCAS3B,0bAAC,gJAAW;4BAAC,gBAAgB;;;;;;;;;;;;;;;;;;;AAMzC"}},
    {"offset": {"line": 2152, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,0bAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 2177, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/components/app/chat/types.ts"],"sourcesContent":["// Type for tool parts (tool-{toolName} format from AI SDK 6)\nexport interface ToolCallPart {\n  type: string;\n  toolName?: string;\n  toolCallId?: string;\n  args?: Record<string, unknown>;\n  result?: unknown;\n  output?: unknown;\n  state?: \"partial-call\" | \"call\" | \"result\";\n}\n"],"names":[],"mappings":"AAAA,6DAA6D"}},
    {"offset": {"line": 2184, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/components/app/chat/utils.ts"],"sourcesContent":["import type { UIMessage } from \"ai\";\nimport type { ToolCallPart } from \"./types\";\n\n// Extract text content from message parts\nexport function getMessageText(message: UIMessage): string {\n  if (!message.parts || message.parts.length === 0) {\n    return \"\";\n  }\n  return message.parts\n    .filter((part) => part.type === \"text\")\n    .map((part) => (part as { type: \"text\"; text: string }).text)\n    .join(\"\\n\");\n}\n\n// Check if message has tool calls (parts starting with \"tool-\")\nexport function getToolParts(message: UIMessage): ToolCallPart[] {\n  if (!message.parts || message.parts.length === 0) {\n    return [];\n  }\n  return message.parts\n    .filter((part) => part.type.startsWith(\"tool-\"))\n    .map((part) => part as unknown as ToolCallPart);\n}\n\n// Get human-readable tool name\nexport function getToolDisplayName(toolName: string): string {\n  const toolNames: Record<string, string> = {\n    searchProducts: \"Searching products\",\n    getMyOrders: \"Getting your orders\",\n  };\n  return toolNames[toolName] || toolName;\n}\n"],"names":[],"mappings":";;;;;;;;AAIO,SAAS,eAAe,OAAkB;IAC/C,IAAI,CAAC,QAAQ,KAAK,IAAI,QAAQ,KAAK,CAAC,MAAM,KAAK,GAAG;QAChD,OAAO;IACT;IACA,OAAO,QAAQ,KAAK,CACjB,MAAM,CAAC,CAAC,OAAS,KAAK,IAAI,KAAK,QAC/B,GAAG,CAAC,CAAC,OAAS,AAAC,KAAwC,IAAI,EAC3D,IAAI,CAAC;AACV;AAGO,SAAS,aAAa,OAAkB;IAC7C,IAAI,CAAC,QAAQ,KAAK,IAAI,QAAQ,KAAK,CAAC,MAAM,KAAK,GAAG;QAChD,OAAO,EAAE;IACX;IACA,OAAO,QAAQ,KAAK,CACjB,MAAM,CAAC,CAAC,OAAS,KAAK,IAAI,CAAC,UAAU,CAAC,UACtC,GAAG,CAAC,CAAC,OAAS;AACnB;AAGO,SAAS,mBAAmB,QAAgB;IACjD,MAAM,YAAoC;QACxC,gBAAgB;QAChB,aAAa;IACf;IACA,OAAO,SAAS,CAAC,SAAS,IAAI;AAChC"}},
    {"offset": {"line": 2215, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/components/app/chat/WelcomeScreen.tsx"],"sourcesContent":["import { Sparkles, Package, Search } from \"lucide-react\";\n\ninterface WelcomeScreenProps {\n  onSuggestionClick: (message: { text: string }) => void;\n  isSignedIn: boolean;\n}\n\nconst productSuggestions = [\n  \"Show me oak tables\",\n  \"Leather sofas under £1000\",\n  \"What chairs do you have?\",\n];\n\nconst orderSuggestions = [\n  \"Where's my order?\",\n  \"Show me my recent orders\",\n  \"Has my order shipped?\",\n];\n\nexport function WelcomeScreen({\n  onSuggestionClick,\n  isSignedIn,\n}: WelcomeScreenProps) {\n  return (\n    <div className=\"flex h-full flex-col items-center justify-center text-center px-4\">\n      <div className=\"rounded-full bg-amber-100 p-4 dark:bg-amber-900/30\">\n        <Sparkles className=\"h-8 w-8 text-amber-500\" />\n      </div>\n      <h3 className=\"mt-4 text-lg font-medium text-zinc-900 dark:text-zinc-100\">\n        How can I help you today?\n      </h3>\n      <p className=\"mt-2 text-sm text-zinc-500 dark:text-zinc-400 max-w-xs\">\n        {isSignedIn\n          ? \"I can help you find furniture, check your orders, and track deliveries.\"\n          : \"I can help you find furniture by style, material, color, or price. Just ask!\"}\n      </p>\n\n      {/* Product suggestions */}\n      <div className=\"mt-6 w-full max-w-sm\">\n        <div className=\"flex items-center gap-2 text-xs font-medium text-zinc-500 dark:text-zinc-400 mb-2\">\n          <Search className=\"h-3 w-3\" />\n          Find products\n        </div>\n        <div className=\"flex flex-wrap justify-center gap-2\">\n          {productSuggestions.map((suggestion) => (\n            <button\n              key={suggestion}\n              type=\"button\"\n              onClick={() => onSuggestionClick({ text: suggestion })}\n              className=\"rounded-full border border-zinc-200 bg-white px-3 py-1.5 text-sm text-zinc-700 transition-colors hover:bg-zinc-50 hover:border-amber-300 dark:border-zinc-700 dark:bg-zinc-800 dark:text-zinc-300 dark:hover:bg-zinc-700 dark:hover:border-amber-600\"\n            >\n              {suggestion}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Order suggestions - only for signed in users */}\n      {isSignedIn && (\n        <div className=\"mt-4 w-full max-w-sm\">\n          <div className=\"flex items-center gap-2 text-xs font-medium text-zinc-500 dark:text-zinc-400 mb-2\">\n            <Package className=\"h-3 w-3\" />\n            Your orders\n          </div>\n          <div className=\"flex flex-wrap justify-center gap-2\">\n            {orderSuggestions.map((suggestion) => (\n              <button\n                key={suggestion}\n                type=\"button\"\n                onClick={() => onSuggestionClick({ text: suggestion })}\n                className=\"rounded-full border border-amber-200 bg-amber-50 px-3 py-1.5 text-sm text-amber-700 transition-colors hover:bg-amber-100 dark:border-amber-800 dark:bg-amber-950/30 dark:text-amber-300 dark:hover:bg-amber-900/40\"\n              >\n                {suggestion}\n              </button>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AAAA;;;AAOA,MAAM,qBAAqB;IACzB;IACA;IACA;CACD;AAED,MAAM,mBAAmB;IACvB;IACA;IACA;CACD;AAEM,SAAS,cAAc,EAC5B,iBAAiB,EACjB,UAAU,EACS;IACnB,qBACE,0bAAC;QAAI,WAAU;;0BACb,0bAAC;gBAAI,WAAU;0BACb,cAAA,0bAAC,0SAAQ;oBAAC,WAAU;;;;;;;;;;;0BAEtB,0bAAC;gBAAG,WAAU;0BAA4D;;;;;;0BAG1E,0bAAC;gBAAE,WAAU;0BACV,aACG,4EACA;;;;;;0BAIN,0bAAC;gBAAI,WAAU;;kCACb,0bAAC;wBAAI,WAAU;;0CACb,0bAAC,oSAAM;gCAAC,WAAU;;;;;;4BAAY;;;;;;;kCAGhC,0bAAC;wBAAI,WAAU;kCACZ,mBAAmB,GAAG,CAAC,CAAC,2BACvB,0bAAC;gCAEC,MAAK;gCACL,SAAS,IAAM,kBAAkB;wCAAE,MAAM;oCAAW;gCACpD,WAAU;0CAET;+BALI;;;;;;;;;;;;;;;;YAYZ,4BACC,0bAAC;gBAAI,WAAU;;kCACb,0bAAC;wBAAI,WAAU;;0CACb,0bAAC,uSAAO;gCAAC,WAAU;;;;;;4BAAY;;;;;;;kCAGjC,0bAAC;wBAAI,WAAU;kCACZ,iBAAiB,GAAG,CAAC,CAAC,2BACrB,0bAAC;gCAEC,MAAK;gCACL,SAAS,IAAM,kBAAkB;wCAAE,MAAM;oCAAW;gCACpD,WAAU;0CAET;+BALI;;;;;;;;;;;;;;;;;;;;;;AAarB"}},
    {"offset": {"line": 2415, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/components/app/chat/MessageContent.tsx"],"sourcesContent":["import Link from \"next/link\";\nimport Markdown from \"react-markdown\";\n\ninterface MessageContentProps {\n  content: string;\n  closeChat: () => void;\n  isUser: boolean;\n}\n\nexport function MessageContent({\n  content,\n  closeChat,\n  isUser,\n}: MessageContentProps) {\n  const handleCloseChat = () => {\n    if (window.matchMedia(\"(max-width: 767px)\").matches) {\n      closeChat();\n    }\n  };\n  return (\n    <Markdown\n      components={{\n        a: ({ href, children }) => {\n          if (!href) return <span>{children}</span>;\n          const isInternalLink = href.startsWith(\"/\");\n          if (isInternalLink) {\n            return (\n              <Link\n                href={href}\n                onClick={handleCloseChat}\n                className=\"text-amber-600 hover:text-amber-700 underline underline-offset-2 transition-colors dark:text-amber-400 dark:hover:text-amber-300\"\n              >\n                {children}\n              </Link>\n            );\n          }\n          return (\n            <a\n              href={href}\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"text-amber-600 hover:text-amber-700 underline underline-offset-2 transition-colors dark:text-amber-400 dark:hover:text-amber-300\"\n            >\n              {children}\n            </a>\n          );\n        },\n        p: ({ children }) => <p className=\"mb-2 last:mb-0\">{children}</p>,\n        h1: ({ children }) => (\n          <h1 className=\"text-lg font-bold mb-2\">{children}</h1>\n        ),\n        h2: ({ children }) => (\n          <h2 className=\"text-base font-bold mb-2\">{children}</h2>\n        ),\n        h3: ({ children }) => (\n          <h3 className=\"text-sm font-semibold mb-1\">{children}</h3>\n        ),\n        ul: ({ children }) => (\n          <ul className=\"list-disc list-outside ml-4 mb-2 space-y-1\">\n            {children}\n          </ul>\n        ),\n        ol: ({ children }) => (\n          <ol className=\"list-decimal list-outside ml-4 mb-2 space-y-1\">\n            {children}\n          </ol>\n        ),\n        li: ({ children }) => {\n          if (!children || (typeof children === \"string\" && !children.trim())) {\n            return null;\n          }\n          return <li className=\"pl-1\">{children}</li>;\n        },\n        hr: () => <hr className=\"my-4 border-zinc-200 dark:border-zinc-700\" />,\n        code: ({ children, className }) => {\n          const isInline = !className;\n          if (isInline) {\n            return (\n              <code\n                className={`px-1 py-0.5 rounded text-xs font-mono ${\n                  isUser\n                    ? \"bg-zinc-700 text-zinc-200\"\n                    : \"bg-zinc-200 text-zinc-800 dark:bg-zinc-700 dark:text-zinc-200\"\n                }`}\n              >\n                {children}\n              </code>\n            );\n          }\n          return <code className={className}>{children}</code>;\n        },\n        pre: ({ children }) => (\n          <pre className=\"p-3 rounded-lg bg-zinc-200 dark:bg-zinc-700 overflow-x-auto mb-2 text-xs\">\n            {children}\n          </pre>\n        ),\n        strong: ({ children }) => (\n          <strong className=\"font-semibold\">{children}</strong>\n        ),\n        em: ({ children }) => <em className=\"italic\">{children}</em>,\n      }}\n    >\n      {content}\n    </Markdown>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAQO,SAAS,eAAe,EAC7B,OAAO,EACP,SAAS,EACT,MAAM,EACc;IACpB,MAAM,kBAAkB;QACtB,IAAI,OAAO,UAAU,CAAC,sBAAsB,OAAO,EAAE;YACnD;QACF;IACF;IACA,qBACE,0bAAC,2TAAQ;QACP,YAAY;YACV,GAAG,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE;gBACpB,IAAI,CAAC,MAAM,qBAAO,0bAAC;8BAAM;;;;;;gBACzB,MAAM,iBAAiB,KAAK,UAAU,CAAC;gBACvC,IAAI,gBAAgB;oBAClB,qBACE,0bAAC,mXAAI;wBACH,MAAM;wBACN,SAAS;wBACT,WAAU;kCAET;;;;;;gBAGP;gBACA,qBACE,0bAAC;oBACC,MAAM;oBACN,QAAO;oBACP,KAAI;oBACJ,WAAU;8BAET;;;;;;YAGP;YACA,GAAG,CAAC,EAAE,QAAQ,EAAE,iBAAK,0bAAC;oBAAE,WAAU;8BAAkB;;;;;;YACpD,IAAI,CAAC,EAAE,QAAQ,EAAE,iBACf,0bAAC;oBAAG,WAAU;8BAA0B;;;;;;YAE1C,IAAI,CAAC,EAAE,QAAQ,EAAE,iBACf,0bAAC;oBAAG,WAAU;8BAA4B;;;;;;YAE5C,IAAI,CAAC,EAAE,QAAQ,EAAE,iBACf,0bAAC;oBAAG,WAAU;8BAA8B;;;;;;YAE9C,IAAI,CAAC,EAAE,QAAQ,EAAE,iBACf,0bAAC;oBAAG,WAAU;8BACX;;;;;;YAGL,IAAI,CAAC,EAAE,QAAQ,EAAE,iBACf,0bAAC;oBAAG,WAAU;8BACX;;;;;;YAGL,IAAI,CAAC,EAAE,QAAQ,EAAE;gBACf,IAAI,CAAC,YAAa,OAAO,aAAa,YAAY,CAAC,SAAS,IAAI,IAAK;oBACnE,OAAO;gBACT;gBACA,qBAAO,0bAAC;oBAAG,WAAU;8BAAQ;;;;;;YAC/B;YACA,IAAI,kBAAM,0bAAC;oBAAG,WAAU;;;;;;YACxB,MAAM,CAAC,EAAE,QAAQ,EAAE,SAAS,EAAE;gBAC5B,MAAM,WAAW,CAAC;gBAClB,IAAI,UAAU;oBACZ,qBACE,0bAAC;wBACC,WAAW,CAAC,sCAAsC,EAChD,SACI,8BACA,iEACJ;kCAED;;;;;;gBAGP;gBACA,qBAAO,0bAAC;oBAAK,WAAW;8BAAY;;;;;;YACtC;YACA,KAAK,CAAC,EAAE,QAAQ,EAAE,iBAChB,0bAAC;oBAAI,WAAU;8BACZ;;;;;;YAGL,QAAQ,CAAC,EAAE,QAAQ,EAAE,iBACnB,0bAAC;oBAAO,WAAU;8BAAiB;;;;;;YAErC,IAAI,CAAC,EAAE,QAAQ,EAAE,iBAAK,0bAAC;oBAAG,WAAU;8BAAU;;;;;;QAChD;kBAEC;;;;;;AAGP"}},
    {"offset": {"line": 2591, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/components/app/chat/MessageBubble.tsx"],"sourcesContent":["import { User, Bot } from \"lucide-react\";\nimport { MessageContent } from \"./MessageContent\";\n\ninterface MessageBubbleProps {\n  role: string;\n  content: string;\n  closeChat: () => void;\n}\n\nexport function MessageBubble({\n  role,\n  content,\n  closeChat,\n}: MessageBubbleProps) {\n  const isUser = role === \"user\";\n\n  return (\n    <div className={`flex gap-3 ${isUser ? \"flex-row-reverse\" : \"flex-row\"}`}>\n      {/* Avatar */}\n      <div\n        className={`flex h-8 w-8 shrink-0 items-center justify-center rounded-full ${\n          isUser\n            ? \"bg-zinc-900 dark:bg-zinc-100\"\n            : \"bg-amber-100 dark:bg-amber-900/30\"\n        }`}\n      >\n        {isUser ? (\n          <User className=\"h-4 w-4 text-white dark:text-zinc-900\" />\n        ) : (\n          <Bot className=\"h-4 w-4 text-amber-600 dark:text-amber-400\" />\n        )}\n      </div>\n\n      {/* Message Content */}\n      <div\n        className={`max-w-[80%] rounded-2xl px-4 py-2 text-sm ${\n          isUser\n            ? \"bg-zinc-900 text-white dark:bg-zinc-100 dark:text-zinc-900\"\n            : \"bg-zinc-100 text-zinc-900 dark:bg-zinc-800 dark:text-zinc-100\"\n        }`}\n      >\n        <MessageContent\n          content={content}\n          closeChat={closeChat}\n          isUser={isUser}\n        />\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AACA;;;;AAQO,SAAS,cAAc,EAC5B,IAAI,EACJ,OAAO,EACP,SAAS,EACU;IACnB,MAAM,SAAS,SAAS;IAExB,qBACE,0bAAC;QAAI,WAAW,CAAC,WAAW,EAAE,SAAS,qBAAqB,YAAY;;0BAEtE,0bAAC;gBACC,WAAW,CAAC,+DAA+D,EACzE,SACI,iCACA,qCACJ;0BAED,uBACC,0bAAC,8RAAI;oBAAC,WAAU;;;;;yCAEhB,0bAAC,2RAAG;oBAAC,WAAU;;;;;;;;;;;0BAKnB,0bAAC;gBACC,WAAW,CAAC,0CAA0C,EACpD,SACI,+DACA,iEACJ;0BAEF,cAAA,0bAAC,8JAAc;oBACb,SAAS;oBACT,WAAW;oBACX,QAAQ;;;;;;;;;;;;;;;;;AAKlB"}},
    {"offset": {"line": 2654, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/components/app/chat/ProductCardWidget.tsx"],"sourcesContent":["import Link from \"next/link\";\nimport Image from \"next/image\";\nimport { Package } from \"lucide-react\";\nimport type { SearchProduct } from \"@/lib/ai/types\";\n\ninterface ProductCardWidgetProps {\n  product: SearchProduct;\n  onClose: () => void;\n}\n\nexport function ProductCardWidget({\n  product,\n  onClose,\n}: ProductCardWidgetProps) {\n  const isOutOfStock = product.stockStatus === \"out_of_stock\";\n  const isLowStock = product.stockStatus === \"low_stock\";\n\n  const handleClick = () => {\n    // Only close chat on mobile (< 768px)\n    if (window.matchMedia(\"(max-width: 767px)\").matches) {\n      onClose();\n    }\n  };\n\n  const cardContent = (\n    <>\n      {product.imageUrl ? (\n        <Image\n          src={product.imageUrl}\n          alt={product.name ?? \"Product\"}\n          width={48}\n          height={48}\n          className=\"h-12 w-12 shrink-0 rounded-lg object-cover transition-transform duration-200 group-hover:scale-105\"\n        />\n      ) : (\n        <div className=\"flex h-12 w-12 shrink-0 items-center justify-center rounded-lg bg-zinc-100 transition-colors duration-200 group-hover:bg-zinc-200 dark:bg-zinc-700 dark:group-hover:bg-zinc-600\">\n          <Package className=\"h-5 w-5 text-zinc-400\" />\n        </div>\n      )}\n      <div className=\"flex-1 min-w-0\">\n        <div className=\"flex items-start justify-between gap-2\">\n          <div className=\"min-w-0\">\n            <span className=\"block truncate text-sm font-medium text-zinc-900 transition-colors duration-200 group-hover:text-amber-600 dark:text-zinc-100 dark:group-hover:text-amber-400\">\n              {product.name}\n            </span>\n            {product.category && (\n              <span className=\"text-xs text-zinc-500 dark:text-zinc-400\">\n                {product.category}\n              </span>\n            )}\n          </div>\n          {product.priceFormatted && (\n            <span className=\"shrink-0 text-sm font-semibold text-zinc-900 dark:text-zinc-100\">\n              {product.priceFormatted}\n            </span>\n          )}\n        </div>\n        {(isOutOfStock || isLowStock) && (\n          <span\n            className={`mt-1 inline-block text-xs font-medium ${\n              isOutOfStock\n                ? \"text-red-600 dark:text-red-400\"\n                : \"text-amber-600 dark:text-amber-400\"\n            }`}\n          >\n            {isOutOfStock ? \"Out of stock\" : \"Low stock\"}\n          </span>\n        )}\n      </div>\n    </>\n  );\n\n  const cardClasses =\n    \"group flex items-center gap-3 rounded-lg border border-zinc-200 bg-white p-3 transition-all duration-200 hover:border-amber-300 hover:shadow-md hover:shadow-amber-100/50 dark:border-zinc-700 dark:bg-zinc-800/50 dark:hover:border-amber-600/50 dark:hover:shadow-amber-900/20\";\n\n  if (product.productUrl) {\n    return (\n      <Link\n        href={product.productUrl}\n        onClick={handleClick}\n        className={cardClasses}\n      >\n        {cardContent}\n      </Link>\n    );\n  }\n\n  return <div className={cardClasses}>{cardContent}</div>;\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAQO,SAAS,kBAAkB,EAChC,OAAO,EACP,OAAO,EACgB;IACvB,MAAM,eAAe,QAAQ,WAAW,KAAK;IAC7C,MAAM,aAAa,QAAQ,WAAW,KAAK;IAE3C,MAAM,cAAc;QAClB,sCAAsC;QACtC,IAAI,OAAO,UAAU,CAAC,sBAAsB,OAAO,EAAE;YACnD;QACF;IACF;IAEA,MAAM,4BACJ;;YACG,QAAQ,QAAQ,iBACf,0bAAC,oVAAK;gBACJ,KAAK,QAAQ,QAAQ;gBACrB,KAAK,QAAQ,IAAI,IAAI;gBACrB,OAAO;gBACP,QAAQ;gBACR,WAAU;;;;;qCAGZ,0bAAC;gBAAI,WAAU;0BACb,cAAA,0bAAC,uSAAO;oBAAC,WAAU;;;;;;;;;;;0BAGvB,0bAAC;gBAAI,WAAU;;kCACb,0bAAC;wBAAI,WAAU;;0CACb,0bAAC;gCAAI,WAAU;;kDACb,0bAAC;wCAAK,WAAU;kDACb,QAAQ,IAAI;;;;;;oCAEd,QAAQ,QAAQ,kBACf,0bAAC;wCAAK,WAAU;kDACb,QAAQ,QAAQ;;;;;;;;;;;;4BAItB,QAAQ,cAAc,kBACrB,0bAAC;gCAAK,WAAU;0CACb,QAAQ,cAAc;;;;;;;;;;;;oBAI5B,CAAC,gBAAgB,UAAU,mBAC1B,0bAAC;wBACC,WAAW,CAAC,sCAAsC,EAChD,eACI,mCACA,sCACJ;kCAED,eAAe,iBAAiB;;;;;;;;;;;;;;IAO3C,MAAM,cACJ;IAEF,IAAI,QAAQ,UAAU,EAAE;QACtB,qBACE,0bAAC,mXAAI;YACH,MAAM,QAAQ,UAAU;YACxB,SAAS;YACT,WAAW;sBAEV;;;;;;IAGP;IAEA,qBAAO,0bAAC;QAAI,WAAW;kBAAc;;;;;;AACvC"}},
    {"offset": {"line": 2788, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/lib/constants/orderStatus.ts"],"sourcesContent":["import {\n  Package,\n  Truck,\n  XCircle,\n  CreditCard,\n  type LucideIcon,\n} from \"lucide-react\";\n\nexport type OrderStatusValue = \"paid\" | \"shipped\" | \"delivered\" | \"cancelled\";\n\nexport interface OrderStatusConfig {\n  /** The status value/key */\n  value: OrderStatusValue;\n  /** Display label */\n  label: string;\n  /** Badge color classes (combined bg + text) */\n  color: string;\n  /** Lucide icon component */\n  icon: LucideIcon;\n  /** Emoji for AI/chat display */\n  emoji: string;\n  /** Icon text color for widgets */\n  iconColor: string;\n  /** Icon background color for widgets */\n  iconBgColor: string;\n}\n\nexport const ORDER_STATUS_CONFIG: Record<OrderStatusValue, OrderStatusConfig> =\n  {\n    paid: {\n      value: \"paid\",\n      label: \"Paid\",\n      color: \"bg-green-100 text-green-800\",\n      icon: CreditCard,\n      emoji: \"✅\",\n      iconColor: \"text-emerald-600 dark:text-emerald-400\",\n      iconBgColor: \"bg-emerald-100 dark:bg-emerald-900/30\",\n    },\n    shipped: {\n      value: \"shipped\",\n      label: \"Shipped\",\n      color: \"bg-blue-100 text-blue-800\",\n      icon: Truck,\n      emoji: \"📦\",\n      iconColor: \"text-blue-600 dark:text-blue-400\",\n      iconBgColor: \"bg-blue-100 dark:bg-blue-900/30\",\n    },\n    delivered: {\n      value: \"delivered\",\n      label: \"Delivered\",\n      color: \"bg-zinc-100 text-zinc-800\",\n      icon: Package,\n      emoji: \"🎉\",\n      iconColor: \"text-emerald-600 dark:text-emerald-400\",\n      iconBgColor: \"bg-emerald-100 dark:bg-emerald-900/30\",\n    },\n    cancelled: {\n      value: \"cancelled\",\n      label: \"Cancelled\",\n      color: \"bg-red-100 text-red-800\",\n      icon: XCircle,\n      emoji: \"❌\",\n      iconColor: \"text-red-600 dark:text-red-400\",\n      iconBgColor: \"bg-red-100 dark:bg-red-900/30\",\n    },\n  };\n\n/** All valid order status values */\nexport const ORDER_STATUS_VALUES = Object.keys(\n  ORDER_STATUS_CONFIG\n) as OrderStatusValue[];\n\n/** Tabs for admin order filtering (includes \"all\" option) */\nexport const ORDER_STATUS_TABS = [\n  { value: \"all\", label: \"All\" },\n  ...ORDER_STATUS_VALUES.map((value) => ({\n    value,\n    label: ORDER_STATUS_CONFIG[value].label,\n  })),\n] as const;\n\n/** Format for Sanity schema options.list */\nexport const ORDER_STATUS_SANITY_LIST = ORDER_STATUS_VALUES.map((value) => ({\n  title: ORDER_STATUS_CONFIG[value].label,\n  value,\n}));\n\n/** Get order status config with fallback to \"paid\" */\nexport const getOrderStatus = (\n  status: string | null | undefined\n): OrderStatusConfig =>\n  ORDER_STATUS_CONFIG[status as OrderStatusValue] ?? ORDER_STATUS_CONFIG.paid;\n\n/** Get emoji display for status (for AI/chat) */\nexport const getOrderStatusEmoji = (\n  status: string | null | undefined\n): string => {\n  const config = getOrderStatus(status);\n  return `${config.emoji} ${config.label}`;\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;;AA2BO,MAAM,sBACX;IACE,MAAM;QACJ,OAAO;QACP,OAAO;QACP,OAAO;QACP,MAAM,oTAAU;QAChB,OAAO;QACP,WAAW;QACX,aAAa;IACf;IACA,SAAS;QACP,OAAO;QACP,OAAO;QACP,OAAO;QACP,MAAM,iSAAK;QACX,OAAO;QACP,WAAW;QACX,aAAa;IACf;IACA,WAAW;QACT,OAAO;QACP,OAAO;QACP,OAAO;QACP,MAAM,uSAAO;QACb,OAAO;QACP,WAAW;QACX,aAAa;IACf;IACA,WAAW;QACT,OAAO;QACP,OAAO;QACP,OAAO;QACP,MAAM,2SAAO;QACb,OAAO;QACP,WAAW;QACX,aAAa;IACf;AACF;AAGK,MAAM,sBAAsB,OAAO,IAAI,CAC5C;AAIK,MAAM,oBAAoB;IAC/B;QAAE,OAAO;QAAO,OAAO;IAAM;OAC1B,oBAAoB,GAAG,CAAC,CAAC,QAAU,CAAC;YACrC;YACA,OAAO,mBAAmB,CAAC,MAAM,CAAC,KAAK;QACzC,CAAC;CACF;AAGM,MAAM,2BAA2B,oBAAoB,GAAG,CAAC,CAAC,QAAU,CAAC;QAC1E,OAAO,mBAAmB,CAAC,MAAM,CAAC,KAAK;QACvC;IACF,CAAC;AAGM,MAAM,iBAAiB,CAC5B,SAEA,mBAAmB,CAAC,OAA2B,IAAI,oBAAoB,IAAI;AAGtE,MAAM,sBAAsB,CACjC;IAEA,MAAM,SAAS,eAAe;IAC9B,OAAO,GAAG,OAAO,KAAK,CAAC,CAAC,EAAE,OAAO,KAAK,EAAE;AAC1C"}},
    {"offset": {"line": 2869, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/components/app/StackedProductImages.tsx"],"sourcesContent":["import Image from \"next/image\";\nimport { ShoppingBag } from \"lucide-react\";\n\ninterface StackedProductImagesProps {\n  images: string[];\n  /** Total number of items (used to calculate \"+X more\" count) */\n  totalCount?: number;\n  /** Size variant */\n  size?: \"sm\" | \"md\" | \"lg\";\n  /** Whether to animate on hover (requires parent with group class) */\n  hoverScale?: boolean;\n}\n\nconst sizeConfig = {\n  sm: {\n    container: \"h-12 w-12\",\n    single: \"100%\",\n    stacked: \"36px\",\n    offset: 4,\n    icon: \"h-5 w-5\",\n    fontSize: \"text-[10px]\",\n    imageSizes: \"48px\",\n  },\n  md: {\n    container: \"h-16 w-16\",\n    single: \"100%\",\n    stacked: \"48px\",\n    offset: 5,\n    icon: \"h-6 w-6\",\n    fontSize: \"text-xs\",\n    imageSizes: \"64px\",\n  },\n  lg: {\n    container: \"h-20 w-20\",\n    single: \"100%\",\n    stacked: \"56px\",\n    offset: 6,\n    icon: \"h-8 w-8\",\n    fontSize: \"text-xs\",\n    imageSizes: \"80px\",\n  },\n};\n\nexport function StackedProductImages({\n  images,\n  totalCount,\n  size = \"sm\",\n  hoverScale = true,\n}: StackedProductImagesProps) {\n  const config = sizeConfig[size];\n  const displayImages = images.slice(0, 3);\n  const extraCount = (totalCount ?? images.length) - displayImages.length;\n\n  const hoverClass = hoverScale\n    ? \"transition-transform duration-200 group-hover:scale-105\"\n    : \"\";\n\n  if (displayImages.length === 0) {\n    return (\n      <div\n        className={`relative flex items-center justify-center ${config.container}`}\n      >\n        <div\n          className={`flex h-full w-full items-center justify-center rounded-lg bg-zinc-100 dark:bg-zinc-700 ${hoverClass}`}\n        >\n          <ShoppingBag className={`${config.icon} text-zinc-400`} />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div\n      className={`relative flex items-center justify-center ${config.container}`}\n    >\n      <div className=\"relative h-full w-full\">\n        {displayImages.map((imageUrl, idx) => (\n          <div\n            key={imageUrl}\n            className={`absolute overflow-hidden rounded-lg border-2 border-white bg-zinc-100 shadow-sm dark:border-zinc-800 dark:bg-zinc-700 ${hoverClass}`}\n            style={{\n              width:\n                displayImages.length === 1 ? config.single : config.stacked,\n              height:\n                displayImages.length === 1 ? config.single : config.stacked,\n              top: displayImages.length === 1 ? 0 : `${idx * config.offset}px`,\n              left: displayImages.length === 1 ? 0 : `${idx * config.offset}px`,\n              zIndex: displayImages.length - idx,\n            }}\n          >\n            <Image\n              src={imageUrl}\n              alt=\"\"\n              fill\n              className=\"object-cover\"\n              sizes={config.imageSizes}\n            />\n          </div>\n        ))}\n        {extraCount > 0 && displayImages.length > 1 && (\n          <div\n            className={`absolute flex items-center justify-center rounded-lg border-2 border-white bg-zinc-200 font-medium text-zinc-600 dark:border-zinc-800 dark:bg-zinc-600 dark:text-zinc-300 ${config.fontSize}`}\n            style={{\n              width: config.stacked,\n              height: config.stacked,\n              top: `${Math.min(displayImages.length, 2) * config.offset}px`,\n              left: `${Math.min(displayImages.length, 2) * config.offset}px`,\n              zIndex: 0,\n            }}\n          >\n            +{extraCount}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAYA,MAAM,aAAa;IACjB,IAAI;QACF,WAAW;QACX,QAAQ;QACR,SAAS;QACT,QAAQ;QACR,MAAM;QACN,UAAU;QACV,YAAY;IACd;IACA,IAAI;QACF,WAAW;QACX,QAAQ;QACR,SAAS;QACT,QAAQ;QACR,MAAM;QACN,UAAU;QACV,YAAY;IACd;IACA,IAAI;QACF,WAAW;QACX,QAAQ;QACR,SAAS;QACT,QAAQ;QACR,MAAM;QACN,UAAU;QACV,YAAY;IACd;AACF;AAEO,SAAS,qBAAqB,EACnC,MAAM,EACN,UAAU,EACV,OAAO,IAAI,EACX,aAAa,IAAI,EACS;IAC1B,MAAM,SAAS,UAAU,CAAC,KAAK;IAC/B,MAAM,gBAAgB,OAAO,KAAK,CAAC,GAAG;IACtC,MAAM,aAAa,CAAC,cAAc,OAAO,MAAM,IAAI,cAAc,MAAM;IAEvE,MAAM,aAAa,aACf,4DACA;IAEJ,IAAI,cAAc,MAAM,KAAK,GAAG;QAC9B,qBACE,0bAAC;YACC,WAAW,CAAC,0CAA0C,EAAE,OAAO,SAAS,EAAE;sBAE1E,cAAA,0bAAC;gBACC,WAAW,CAAC,uFAAuF,EAAE,YAAY;0BAEjH,cAAA,0bAAC,uTAAW;oBAAC,WAAW,GAAG,OAAO,IAAI,CAAC,cAAc,CAAC;;;;;;;;;;;;;;;;IAI9D;IAEA,qBACE,0bAAC;QACC,WAAW,CAAC,0CAA0C,EAAE,OAAO,SAAS,EAAE;kBAE1E,cAAA,0bAAC;YAAI,WAAU;;gBACZ,cAAc,GAAG,CAAC,CAAC,UAAU,oBAC5B,0bAAC;wBAEC,WAAW,CAAC,sHAAsH,EAAE,YAAY;wBAChJ,OAAO;4BACL,OACE,cAAc,MAAM,KAAK,IAAI,OAAO,MAAM,GAAG,OAAO,OAAO;4BAC7D,QACE,cAAc,MAAM,KAAK,IAAI,OAAO,MAAM,GAAG,OAAO,OAAO;4BAC7D,KAAK,cAAc,MAAM,KAAK,IAAI,IAAI,GAAG,MAAM,OAAO,MAAM,CAAC,EAAE,CAAC;4BAChE,MAAM,cAAc,MAAM,KAAK,IAAI,IAAI,GAAG,MAAM,OAAO,MAAM,CAAC,EAAE,CAAC;4BACjE,QAAQ,cAAc,MAAM,GAAG;wBACjC;kCAEA,cAAA,0bAAC,oVAAK;4BACJ,KAAK;4BACL,KAAI;4BACJ,IAAI;4BACJ,WAAU;4BACV,OAAO,OAAO,UAAU;;;;;;uBAjBrB;;;;;gBAqBR,aAAa,KAAK,cAAc,MAAM,GAAG,mBACxC,0bAAC;oBACC,WAAW,CAAC,0KAA0K,EAAE,OAAO,QAAQ,EAAE;oBACzM,OAAO;wBACL,OAAO,OAAO,OAAO;wBACrB,QAAQ,OAAO,OAAO;wBACtB,KAAK,GAAG,KAAK,GAAG,CAAC,cAAc,MAAM,EAAE,KAAK,OAAO,MAAM,CAAC,EAAE,CAAC;wBAC7D,MAAM,GAAG,KAAK,GAAG,CAAC,cAAc,MAAM,EAAE,KAAK,OAAO,MAAM,CAAC,EAAE,CAAC;wBAC9D,QAAQ;oBACV;;wBACD;wBACG;;;;;;;;;;;;;;;;;;AAMd"}},
    {"offset": {"line": 3000, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/components/app/chat/OrderCardWidget.tsx"],"sourcesContent":["import Link from \"next/link\";\nimport type { OrderSummary } from \"@/lib/ai/tools/get-my-orders\";\nimport { getOrderStatus } from \"@/lib/constants/orderStatus\";\nimport { formatDate, formatOrderNumber } from \"@/lib/utils\";\nimport { StackedProductImages } from \"@/components/app/StackedProductImages\";\n\ninterface OrderCardWidgetProps {\n  order: OrderSummary;\n  onClose: () => void;\n}\n\nexport function OrderCardWidget({ order, onClose }: OrderCardWidgetProps) {\n  const config = getOrderStatus(order.status);\n\n  const handleClick = () => {\n    // Only close chat on mobile (< 768px)\n    if (window.matchMedia(\"(max-width: 767px)\").matches) {\n      onClose();\n    }\n  };\n\n  // Format date\n  const formattedDate = order.createdAt\n    ? formatDate(order.createdAt, \"long\")\n    : null;\n\n  // Truncate item names for display\n  const displayItems =\n    order.itemNames.length > 2\n      ? `${order.itemNames.slice(0, 2).join(\", \")} +${order.itemNames.length - 2} more`\n      : order.itemNames.join(\", \");\n\n  const cardContent = (\n    <>\n      <StackedProductImages\n        images={order.itemImages}\n        totalCount={order.itemCount}\n        size=\"sm\"\n      />\n\n      <div className=\"flex-1 min-w-0\">\n        <div className=\"flex items-start justify-between gap-2\">\n          <div className=\"min-w-0\">\n            <span className=\"block truncate text-sm font-medium text-zinc-900 transition-colors duration-200 group-hover:text-amber-600 dark:text-zinc-100 dark:group-hover:text-amber-400\">\n              Order #{formatOrderNumber(order.orderNumber)}\n            </span>\n            {displayItems && (\n              <span className=\"block truncate text-xs text-zinc-500 dark:text-zinc-400\">\n                {displayItems}\n              </span>\n            )}\n          </div>\n          {order.totalFormatted && (\n            <span className=\"shrink-0 text-sm font-semibold text-zinc-900 dark:text-zinc-100\">\n              {order.totalFormatted}\n            </span>\n          )}\n        </div>\n        <div className=\"mt-1 flex items-center gap-2\">\n          <span\n            className={`inline-flex items-center gap-1 text-xs font-medium ${config.iconColor}`}\n          >\n            {order.statusDisplay}\n          </span>\n          {formattedDate && (\n            <>\n              <span className=\"text-zinc-300 dark:text-zinc-600\">•</span>\n              <span className=\"text-xs text-zinc-500 dark:text-zinc-400\">\n                {formattedDate}\n              </span>\n            </>\n          )}\n        </div>\n      </div>\n    </>\n  );\n\n  const cardClasses =\n    \"group flex items-center gap-3 rounded-lg border border-zinc-200 bg-white p-3 transition-all duration-200 hover:border-amber-300 hover:shadow-md hover:shadow-amber-100/50 dark:border-zinc-700 dark:bg-zinc-800/50 dark:hover:border-amber-600/50 dark:hover:shadow-amber-900/20\";\n\n  return (\n    <Link href={order.orderUrl} onClick={handleClick} className={cardClasses}>\n      {cardContent}\n    </Link>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AAEA;AACA;AACA;;;;;;AAOO,SAAS,gBAAgB,EAAE,KAAK,EAAE,OAAO,EAAwB;IACtE,MAAM,SAAS,IAAA,iJAAc,EAAC,MAAM,MAAM;IAE1C,MAAM,cAAc;QAClB,sCAAsC;QACtC,IAAI,OAAO,UAAU,CAAC,sBAAsB,OAAO,EAAE;YACnD;QACF;IACF;IAEA,cAAc;IACd,MAAM,gBAAgB,MAAM,SAAS,GACjC,IAAA,0HAAU,EAAC,MAAM,SAAS,EAAE,UAC5B;IAEJ,kCAAkC;IAClC,MAAM,eACJ,MAAM,SAAS,CAAC,MAAM,GAAG,IACrB,GAAG,MAAM,SAAS,CAAC,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC,MAAM,EAAE,EAAE,MAAM,SAAS,CAAC,MAAM,GAAG,EAAE,KAAK,CAAC,GAC/E,MAAM,SAAS,CAAC,IAAI,CAAC;IAE3B,MAAM,4BACJ;;0BACE,0bAAC,kKAAoB;gBACnB,QAAQ,MAAM,UAAU;gBACxB,YAAY,MAAM,SAAS;gBAC3B,MAAK;;;;;;0BAGP,0bAAC;gBAAI,WAAU;;kCACb,0bAAC;wBAAI,WAAU;;0CACb,0bAAC;gCAAI,WAAU;;kDACb,0bAAC;wCAAK,WAAU;;4CAAgK;4CACtK,IAAA,iIAAiB,EAAC,MAAM,WAAW;;;;;;;oCAE5C,8BACC,0bAAC;wCAAK,WAAU;kDACb;;;;;;;;;;;;4BAIN,MAAM,cAAc,kBACnB,0bAAC;gCAAK,WAAU;0CACb,MAAM,cAAc;;;;;;;;;;;;kCAI3B,0bAAC;wBAAI,WAAU;;0CACb,0bAAC;gCACC,WAAW,CAAC,mDAAmD,EAAE,OAAO,SAAS,EAAE;0CAElF,MAAM,aAAa;;;;;;4BAErB,+BACC;;kDACE,0bAAC;wCAAK,WAAU;kDAAmC;;;;;;kDACnD,0bAAC;wCAAK,WAAU;kDACb;;;;;;;;;;;;;;;;;;;;;;IASf,MAAM,cACJ;IAEF,qBACE,0bAAC,mXAAI;QAAC,MAAM,MAAM,QAAQ;QAAE,SAAS;QAAa,WAAW;kBAC1D;;;;;;AAGP"}},
    {"offset": {"line": 3146, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/components/app/chat/ToolCallUI.tsx"],"sourcesContent":["import { Search, Package, CheckCircle2, Loader2 } from \"lucide-react\";\nimport type { ToolCallPart } from \"./types\";\nimport type { SearchProductsResult } from \"@/lib/ai/types\";\nimport type { GetMyOrdersResult } from \"@/lib/ai/tools/get-my-orders\";\nimport { getToolDisplayName } from \"./utils\";\nimport { ProductCardWidget } from \"./ProductCardWidget\";\nimport { OrderCardWidget } from \"./OrderCardWidget\";\n\ninterface ToolCallUIProps {\n  toolPart: ToolCallPart;\n  closeChat: () => void;\n}\n\nexport function ToolCallUI({ toolPart, closeChat }: ToolCallUIProps) {\n  const toolName = toolPart.toolName || toolPart.type.replace(\"tool-\", \"\");\n  const displayName = getToolDisplayName(toolName);\n\n  // Check for completion\n  const isComplete =\n    toolPart.state === \"result\" ||\n    toolPart.result !== undefined ||\n    toolPart.output !== undefined;\n\n  const searchQuery =\n    toolName === \"searchProducts\" && toolPart.args?.query\n      ? String(toolPart.args.query)\n      : undefined;\n\n  const orderStatus =\n    toolName === \"getMyOrders\" && toolPart.args?.status\n      ? String(toolPart.args.status)\n      : undefined;\n\n  // Get results based on tool type\n  const result = toolPart.result || toolPart.output;\n  const productResult = result as SearchProductsResult | undefined;\n  const orderResult = result as GetMyOrdersResult | undefined;\n\n  const hasProducts =\n    toolName === \"searchProducts\" &&\n    productResult?.found &&\n    productResult.products &&\n    productResult.products.length > 0;\n\n  const hasOrders =\n    toolName === \"getMyOrders\" &&\n    orderResult?.found &&\n    orderResult.orders &&\n    orderResult.orders.length > 0;\n\n  // Determine icon based on tool type\n  const ToolIcon = toolName === \"getMyOrders\" ? Package : Search;\n\n  return (\n    <div className=\"space-y-2\">\n      {/* Tool status indicator */}\n      <div className=\"flex gap-3\">\n        <div className=\"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-amber-100 dark:bg-amber-900/30\">\n          <ToolIcon className=\"h-4 w-4 text-amber-600 dark:text-amber-400\" />\n        </div>\n        <div\n          className={`flex items-center gap-3 rounded-xl px-4 py-2 text-sm ${\n            isComplete\n              ? \"bg-emerald-50 border border-emerald-200 dark:bg-emerald-950/30 dark:border-emerald-800\"\n              : \"bg-amber-50 border border-amber-200 dark:bg-amber-950/30 dark:border-amber-800\"\n          }`}\n        >\n          {isComplete ? (\n            <CheckCircle2 className=\"h-4 w-4 text-emerald-600 dark:text-emerald-400 shrink-0\" />\n          ) : (\n            <Loader2 className=\"h-4 w-4 text-amber-600 dark:text-amber-400 animate-spin shrink-0\" />\n          )}\n          <div className=\"flex flex-col\">\n            <span\n              className={`font-medium ${\n                isComplete\n                  ? \"text-emerald-700 dark:text-emerald-300\"\n                  : \"text-amber-700 dark:text-amber-300\"\n              }`}\n            >\n              {isComplete ? `${displayName} complete` : `${displayName}...`}\n            </span>\n            {searchQuery && (\n              <span className=\"text-xs text-zinc-500 dark:text-zinc-400\">\n                Query: &quot;{searchQuery}&quot;\n              </span>\n            )}\n            {orderStatus && (\n              <span className=\"text-xs text-zinc-500 dark:text-zinc-400\">\n                Filter: {orderStatus}\n              </span>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Product results */}\n      {hasProducts && productResult?.products && (\n        <div className=\"ml-11 mt-2\">\n          <p className=\"text-xs text-zinc-500 dark:text-zinc-400 mb-2\">\n            {productResult.products.length} product\n            {productResult.products.length !== 1 ? \"s\" : \"\"} found\n          </p>\n          <div className=\"space-y-2\">\n            {productResult.products.map((product) => (\n              <ProductCardWidget\n                key={product.id}\n                product={product}\n                onClose={closeChat}\n              />\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Order results */}\n      {hasOrders && orderResult?.orders && (\n        <div className=\"ml-11 mt-2\">\n          <p className=\"text-xs text-zinc-500 dark:text-zinc-400 mb-2\">\n            {orderResult.orders.length} order\n            {orderResult.orders.length !== 1 ? \"s\" : \"\"} found\n          </p>\n          <div className=\"space-y-2\">\n            {orderResult.orders.map((order) => (\n              <OrderCardWidget\n                key={order.id}\n                order={order}\n                onClose={closeChat}\n              />\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;;;;;;AAOO,SAAS,WAAW,EAAE,QAAQ,EAAE,SAAS,EAAmB;IACjE,MAAM,WAAW,SAAS,QAAQ,IAAI,SAAS,IAAI,CAAC,OAAO,CAAC,SAAS;IACrE,MAAM,cAAc,IAAA,wJAAkB,EAAC;IAEvC,uBAAuB;IACvB,MAAM,aACJ,SAAS,KAAK,KAAK,YACnB,SAAS,MAAM,KAAK,aACpB,SAAS,MAAM,KAAK;IAEtB,MAAM,cACJ,aAAa,oBAAoB,SAAS,IAAI,EAAE,QAC5C,OAAO,SAAS,IAAI,CAAC,KAAK,IAC1B;IAEN,MAAM,cACJ,aAAa,iBAAiB,SAAS,IAAI,EAAE,SACzC,OAAO,SAAS,IAAI,CAAC,MAAM,IAC3B;IAEN,iCAAiC;IACjC,MAAM,SAAS,SAAS,MAAM,IAAI,SAAS,MAAM;IACjD,MAAM,gBAAgB;IACtB,MAAM,cAAc;IAEpB,MAAM,cACJ,aAAa,oBACb,eAAe,SACf,cAAc,QAAQ,IACtB,cAAc,QAAQ,CAAC,MAAM,GAAG;IAElC,MAAM,YACJ,aAAa,iBACb,aAAa,SACb,YAAY,MAAM,IAClB,YAAY,MAAM,CAAC,MAAM,GAAG;IAE9B,oCAAoC;IACpC,MAAM,WAAW,aAAa,gBAAgB,uSAAO,GAAG,oSAAM;IAE9D,qBACE,0bAAC;QAAI,WAAU;;0BAEb,0bAAC;gBAAI,WAAU;;kCACb,0bAAC;wBAAI,WAAU;kCACb,cAAA,0bAAC;4BAAS,WAAU;;;;;;;;;;;kCAEtB,0bAAC;wBACC,WAAW,CAAC,qDAAqD,EAC/D,aACI,2FACA,kFACJ;;4BAED,2BACC,0bAAC,yTAAY;gCAAC,WAAU;;;;;qDAExB,0bAAC,gTAAO;gCAAC,WAAU;;;;;;0CAErB,0bAAC;gCAAI,WAAU;;kDACb,0bAAC;wCACC,WAAW,CAAC,YAAY,EACtB,aACI,2CACA,sCACJ;kDAED,aAAa,GAAG,YAAY,SAAS,CAAC,GAAG,GAAG,YAAY,GAAG,CAAC;;;;;;oCAE9D,6BACC,0bAAC;wCAAK,WAAU;;4CAA2C;4CAC3C;4CAAY;;;;;;;oCAG7B,6BACC,0bAAC;wCAAK,WAAU;;4CAA2C;4CAChD;;;;;;;;;;;;;;;;;;;;;;;;;YAQlB,eAAe,eAAe,0BAC7B,0bAAC;gBAAI,WAAU;;kCACb,0bAAC;wBAAE,WAAU;;4BACV,cAAc,QAAQ,CAAC,MAAM;4BAAC;4BAC9B,cAAc,QAAQ,CAAC,MAAM,KAAK,IAAI,MAAM;4BAAG;;;;;;;kCAElD,0bAAC;wBAAI,WAAU;kCACZ,cAAc,QAAQ,CAAC,GAAG,CAAC,CAAC,wBAC3B,0bAAC,oKAAiB;gCAEhB,SAAS;gCACT,SAAS;+BAFJ,QAAQ,EAAE;;;;;;;;;;;;;;;;YAUxB,aAAa,aAAa,wBACzB,0bAAC;gBAAI,WAAU;;kCACb,0bAAC;wBAAE,WAAU;;4BACV,YAAY,MAAM,CAAC,MAAM;4BAAC;4BAC1B,YAAY,MAAM,CAAC,MAAM,KAAK,IAAI,MAAM;4BAAG;;;;;;;kCAE9C,0bAAC;wBAAI,WAAU;kCACZ,YAAY,MAAM,CAAC,GAAG,CAAC,CAAC,sBACvB,0bAAC,gKAAe;gCAEd,OAAO;gCACP,SAAS;+BAFJ,MAAM,EAAE;;;;;;;;;;;;;;;;;;;;;;AAU7B"}},
    {"offset": {"line": 3351, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/components/app/chat/LoadingIndicator.tsx"],"sourcesContent":["import { Bot } from \"lucide-react\";\n\nexport function LoadingIndicator() {\n  return (\n    <div className=\"flex gap-3\">\n      <div className=\"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-amber-100 dark:bg-amber-900/30\">\n        <Bot className=\"h-4 w-4 text-amber-600 dark:text-amber-400\" />\n      </div>\n      <div className=\"flex items-center gap-2 rounded-2xl bg-zinc-100 px-4 py-2 dark:bg-zinc-800\">\n        <div className=\"flex gap-1\">\n          <span className=\"h-2 w-2 animate-bounce rounded-full bg-amber-400 [animation-delay:-0.3s]\" />\n          <span className=\"h-2 w-2 animate-bounce rounded-full bg-amber-400 [animation-delay:-0.15s]\" />\n          <span className=\"h-2 w-2 animate-bounce rounded-full bg-amber-400\" />\n        </div>\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAAA;;;AAEO,SAAS;IACd,qBACE,0bAAC;QAAI,WAAU;;0BACb,0bAAC;gBAAI,WAAU;0BACb,cAAA,0bAAC,2RAAG;oBAAC,WAAU;;;;;;;;;;;0BAEjB,0bAAC;gBAAI,WAAU;0BACb,cAAA,0bAAC;oBAAI,WAAU;;sCACb,0bAAC;4BAAK,WAAU;;;;;;sCAChB,0bAAC;4BAAK,WAAU;;;;;;sCAChB,0bAAC;4BAAK,WAAU;;;;;;;;;;;;;;;;;;;;;;;AAK1B"}},
    {"offset": {"line": 3425, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/components/app/chat/index.ts"],"sourcesContent":["export * from \"./types\";\nexport * from \"./utils\";\nexport * from \"./WelcomeScreen\";\nexport * from \"./MessageBubble\";\nexport * from \"./MessageContent\";\nexport * from \"./ProductCardWidget\";\nexport * from \"./OrderCardWidget\";\nexport * from \"./ToolCallUI\";\nexport * from \"./LoadingIndicator\";\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 3448, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/components/app/ChatSheet.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useRef, useEffect } from \"react\";\nimport { useChat } from \"@ai-sdk/react\";\nimport { useAuth } from \"@clerk/nextjs\";\nimport { Sparkles, Send, Loader2, X, Bot } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  useIsChatOpen,\n  useChatActions,\n  usePendingMessage,\n} from \"@/lib/store/chat-store-provider\";\n\nimport {\n  getMessageText,\n  getToolParts,\n  WelcomeScreen,\n  MessageBubble,\n  ToolCallUI,\n} from \"./chat\";\n\nexport function ChatSheet() {\n  const isOpen = useIsChatOpen();\n  const { closeChat, clearPendingMessage } = useChatActions();\n  const pendingMessage = usePendingMessage();\n  const { isSignedIn } = useAuth();\n  const [input, setInput] = useState(\"\");\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  const { messages, sendMessage, status } = useChat();\n  const isLoading = status === \"streaming\" || status === \"submitted\";\n\n  // Auto-scroll to bottom when new messages arrive or streaming updates\n  // biome-ignore lint/correctness/useExhaustiveDependencies: trigger scroll on message/loading changes\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages, isLoading]);\n\n  // Handle pending message - send it when chat opens\n  useEffect(() => {\n    if (isOpen && pendingMessage && !isLoading) {\n      sendMessage({ text: pendingMessage });\n      clearPendingMessage();\n    }\n  }, [isOpen, pendingMessage, isLoading, sendMessage, clearPendingMessage]);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!input.trim() || isLoading) return;\n\n    sendMessage({ text: input });\n    setInput(\"\");\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <>\n      {/* Backdrop - only visible on mobile/tablet (< xl) */}\n      <div\n        className=\"fixed inset-0 z-40 bg-black/50 xl:hidden\"\n        onClick={closeChat}\n        aria-hidden=\"true\"\n      />\n\n      {/* Sidebar */}\n      <div className=\"fixed top-0 right-0 z-50 flex h-full w-full flex-col border-l border-zinc-200 bg-white overscroll-contain dark:border-zinc-800 dark:bg-zinc-950 sm:w-[448px] animate-in slide-in-from-right duration-300\">\n        {/* Header */}\n        <header className=\"shrink-0 border-b border-zinc-200 dark:border-zinc-800\">\n          <div className=\"flex h-16 items-center justify-between px-6\">\n            <div className=\"flex items-center gap-2 font-semibold\">\n              <Sparkles className=\"h-5 w-5 text-amber-500\" />\n              Shopping Assistant\n            </div>\n            <Button variant=\"ghost\" size=\"icon\" onClick={closeChat}>\n              <X className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </header>\n\n        {/* Messages */}\n        <div className=\"flex-1 overflow-y-auto overscroll-contain px-4 py-4\">\n          {messages.length === 0 ? (\n            <WelcomeScreen\n              onSuggestionClick={sendMessage}\n              isSignedIn={isSignedIn ?? false}\n            />\n          ) : (\n            <div className=\"space-y-4\">\n              {messages.map((message) => {\n                const content = getMessageText(message);\n                const toolParts = getToolParts(message);\n                const hasContent = content.length > 0;\n                const hasTools = toolParts.length > 0;\n\n                if (!hasContent && !hasTools) return null;\n\n                return (\n                  <div key={message.id} className=\"space-y-3\">\n                    {/* Tool call indicators */}\n                    {hasTools &&\n                      toolParts.map((toolPart) => (\n                        <ToolCallUI\n                          key={`tool-${message.id}-${toolPart.toolCallId}`}\n                          toolPart={toolPart}\n                          closeChat={closeChat}\n                        />\n                      ))}\n\n                    {/* Message content */}\n                    {hasContent && (\n                      <MessageBubble\n                        role={message.role}\n                        content={content}\n                        closeChat={closeChat}\n                      />\n                    )}\n                  </div>\n                );\n              })}\n\n              {/* Loading indicator */}\n              {isLoading && messages[messages.length - 1]?.role === \"user\" && (\n                <div className=\"flex gap-3\">\n                  <div className=\"flex h-8 w-8 shrink-0 items-center justify-center rounded-full bg-amber-100 dark:bg-amber-900/30\">\n                    <Bot className=\"h-4 w-4 text-amber-600 dark:text-amber-400\" />\n                  </div>\n                  <div className=\"flex items-center gap-2 rounded-2xl bg-zinc-100 px-4 py-2 dark:bg-zinc-800\">\n                    <div className=\"flex gap-1\">\n                      <span className=\"h-2 w-2 animate-bounce rounded-full bg-amber-400 [animation-delay:-0.3s]\" />\n                      <span className=\"h-2 w-2 animate-bounce rounded-full bg-amber-400 [animation-delay:-0.15s]\" />\n                      <span className=\"h-2 w-2 animate-bounce rounded-full bg-amber-400\" />\n                    </div>\n                  </div>\n                </div>\n              )}\n\n              {/* Scroll anchor */}\n              <div ref={messagesEndRef} />\n            </div>\n          )}\n        </div>\n\n        {/* Input */}\n        <div className=\"border-t border-zinc-200 px-4 py-4 dark:border-zinc-800\">\n          <form onSubmit={handleSubmit} className=\"flex gap-2\">\n            <Input\n              value={input}\n              onChange={(e) => setInput(e.target.value)}\n              placeholder=\"Ask about our furniture...\"\n              disabled={isLoading}\n              className=\"flex-1\"\n            />\n            <Button\n              type=\"submit\"\n              size=\"icon\"\n              disabled={!input.trim() || isLoading}\n            >\n              {isLoading ? (\n                <Loader2 className=\"h-4 w-4 animate-spin\" />\n              ) : (\n                <Send className=\"h-4 w-4\" />\n              )}\n            </Button>\n          </form>\n        </div>\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAMA;AAAA;AAAA;AAAA;AAAA;AAdA;;;;;;;;;;AAsBO,SAAS;IACd,MAAM,SAAS,IAAA,2JAAa;IAC5B,MAAM,EAAE,SAAS,EAAE,mBAAmB,EAAE,GAAG,IAAA,4JAAc;IACzD,MAAM,iBAAiB,IAAA,+JAAiB;IACxC,MAAM,EAAE,UAAU,EAAE,GAAG,IAAA,0cAAO;IAC9B,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,6ZAAQ,EAAC;IACnC,MAAM,iBAAiB,IAAA,2ZAAM,EAAiB;IAE9C,MAAM,EAAE,QAAQ,EAAE,WAAW,EAAE,MAAM,EAAE,GAAG,IAAA,2RAAO;IACjD,MAAM,YAAY,WAAW,eAAe,WAAW;IAEvD,sEAAsE;IACtE,qGAAqG;IACrG,IAAA,8ZAAS,EAAC;QACR,eAAe,OAAO,EAAE,eAAe;YAAE,UAAU;QAAS;IAC9D,GAAG;QAAC;QAAU;KAAU;IAExB,mDAAmD;IACnD,IAAA,8ZAAS,EAAC;QACR,IAAI,UAAU,kBAAkB,CAAC,WAAW;YAC1C,YAAY;gBAAE,MAAM;YAAe;YACnC;QACF;IACF,GAAG;QAAC;QAAQ;QAAgB;QAAW;QAAa;KAAoB;IAExE,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,IAAI,CAAC,MAAM,IAAI,MAAM,WAAW;QAEhC,YAAY;YAAE,MAAM;QAAM;QAC1B,SAAS;IACX;IAEA,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE;;0BAEE,0bAAC;gBACC,WAAU;gBACV,SAAS;gBACT,eAAY;;;;;;0BAId,0bAAC;gBAAI,WAAU;;kCAEb,0bAAC;wBAAO,WAAU;kCAChB,cAAA,0bAAC;4BAAI,WAAU;;8CACb,0bAAC;oCAAI,WAAU;;sDACb,0bAAC,0SAAQ;4CAAC,WAAU;;;;;;wCAA2B;;;;;;;8CAGjD,0bAAC,qIAAM;oCAAC,SAAQ;oCAAQ,MAAK;oCAAO,SAAS;8CAC3C,cAAA,0bAAC,qRAAC;wCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;kCAMnB,0bAAC;wBAAI,WAAU;kCACZ,SAAS,MAAM,KAAK,kBACnB,0bAAC,4JAAa;4BACZ,mBAAmB;4BACnB,YAAY,cAAc;;;;;iDAG5B,0bAAC;4BAAI,WAAU;;gCACZ,SAAS,GAAG,CAAC,CAAC;oCACb,MAAM,UAAU,IAAA,oJAAc,EAAC;oCAC/B,MAAM,YAAY,IAAA,kJAAY,EAAC;oCAC/B,MAAM,aAAa,QAAQ,MAAM,GAAG;oCACpC,MAAM,WAAW,UAAU,MAAM,GAAG;oCAEpC,IAAI,CAAC,cAAc,CAAC,UAAU,OAAO;oCAErC,qBACE,0bAAC;wCAAqB,WAAU;;4CAE7B,YACC,UAAU,GAAG,CAAC,CAAC,yBACb,0bAAC,sJAAU;oDAET,UAAU;oDACV,WAAW;mDAFN,CAAC,KAAK,EAAE,QAAQ,EAAE,CAAC,CAAC,EAAE,SAAS,UAAU,EAAE;;;;;4CAOrD,4BACC,0bAAC,4JAAa;gDACZ,MAAM,QAAQ,IAAI;gDAClB,SAAS;gDACT,WAAW;;;;;;;uCAhBP,QAAQ,EAAE;;;;;gCAqBxB;gCAGC,aAAa,QAAQ,CAAC,SAAS,MAAM,GAAG,EAAE,EAAE,SAAS,wBACpD,0bAAC;oCAAI,WAAU;;sDACb,0bAAC;4CAAI,WAAU;sDACb,cAAA,0bAAC,2RAAG;gDAAC,WAAU;;;;;;;;;;;sDAEjB,0bAAC;4CAAI,WAAU;sDACb,cAAA,0bAAC;gDAAI,WAAU;;kEACb,0bAAC;wDAAK,WAAU;;;;;;kEAChB,0bAAC;wDAAK,WAAU;;;;;;kEAChB,0bAAC;wDAAK,WAAU;;;;;;;;;;;;;;;;;;;;;;;8CAOxB,0bAAC;oCAAI,KAAK;;;;;;;;;;;;;;;;;kCAMhB,0bAAC;wBAAI,WAAU;kCACb,cAAA,0bAAC;4BAAK,UAAU;4BAAc,WAAU;;8CACtC,0bAAC,mIAAK;oCACJ,OAAO;oCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oCACxC,aAAY;oCACZ,UAAU;oCACV,WAAU;;;;;;8CAEZ,0bAAC,qIAAM;oCACL,MAAK;oCACL,MAAK;oCACL,UAAU,CAAC,MAAM,IAAI,MAAM;8CAE1B,0BACC,0bAAC,gTAAO;wCAAC,WAAU;;;;;6DAEnB,0bAAC,8RAAI;wCAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQhC"}},
    {"offset": {"line": 3771, "column": 0}, "map": {"version":3,"sources":["file:///home/lobster/projects/elimurobotics/components/app/AppShell.tsx"],"sourcesContent":["\"use client\";\n\nimport { useIsChatOpen } from \"@/lib/store/chat-store-provider\";\n\nexport function AppShell({ children }: { children: React.ReactNode }) {\n  const isChatOpen = useIsChatOpen();\n\n  return (\n    <div\n      className={`min-h-screen transition-all duration-300 ease-in-out ${\n        isChatOpen ? \"xl:mr-[448px] max-xl:overflow-hidden max-xl:h-screen\" : \"\"\n      }`}\n    >\n      {children}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIO,SAAS,SAAS,EAAE,QAAQ,EAAiC;IAClE,MAAM,aAAa,IAAA,2JAAa;IAEhC,qBACE,0bAAC;QACC,WAAW,CAAC,qDAAqD,EAC/D,aAAa,yDAAyD,IACtE;kBAED;;;;;;AAGP"}}]
}